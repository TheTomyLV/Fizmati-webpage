"use strict";(self.webpackChunknodebb=self.webpackChunknodebb||[]).push([[12286,16028,38786,63388,48724,86815,61237,82344,80560,73382,26721,28306,43034],{59016:(w,k,u)=>{var p,l;p=[u(4695),u(80431),u(50395),u(7927)],l=function(m,f,n,c){const C={};C.prepareDOM=function(){app.user.uid>0&&m.initUnreadTopics(),f.prepareDOM(),n.prepareDOM(),r(),g(),h()};function r(){$('[component="header/usercontrol"] [data-status]').off("click").on("click",function(t){const o=$(this).attr("data-status");socket.emit("user.setStatus",o,function(a){if(a)return c.error(a);$('[data-uid="'+app.user.uid+'"] [component="user/status"], [component="header/profilelink"] [component="user/status"]').removeClass("away online dnd offline").addClass(o),$('[component="header/usercontrol"] [data-status]').each(function(){$(this).toggleClass("selected",$(this).attr("data-status")===o)}),app.user.status=o}),t.preventDefault()})}function g(){const t=utils.findBootstrapEnvironment();t==="xs"||t==="sm"||utils.isTouchDevice()||$("#header-menu #main-nav").tooltip({selector:".nav-item",placement:"bottom",trigger:"hover",container:"body",animation:!1})}function h(){$("body").on("click",'[component="user/logout"]',function(){return u.e(70145).then(function(){var t=[u(39002)];(function(o){o()}).apply(null,t)}).catch(u.oe),!1})}return C}.apply(k,p),l!==void 0&&(w.exports=l)},50395:(w,k,u)=>{var p,l;p=[u(7237),u(85233)],l=function(m,f){const n={};n.prepareDOM=function(){const h=$('[component="chat/dropdown"]');h.length&&(h.on("show.bs.dropdown",t=>{g("loadChatsDropdown",$(t.target).parent().find('[component="chat/list"]'))}),h.each((t,o)=>{const a=$(o).parent().find(".dropdown-menu");a.hasClass("show")&&g("loadChatsDropdown",a.find('[component="chat/list"]'))}),socket.removeListener("event:chats.receive",c),socket.on("event:chats.receive",c),socket.removeListener("event:chats.typing",C),socket.on("event:chats.typing",C),socket.removeListener("event:chats.roomRename",r),socket.on("event:chats.roomRename",r),socket.on("event:unread.updateChatCount",async function(t){if(t){const[d,b]=await app.require(["chat","forum/chats"]);if(d.isFromBlockedUser(t.fromUid)||d.isLookingAtRoom(t.roomId)||app.user.uid===parseInt(t.fromUid,10))return;b.markChatPageElUnread(t)}let o=await socket.emit("modules.chats.getUnreadCount",{});const a=m.get("chat/icon");o=Math.max(0,o),a.toggleClass("fa-comment",o>0).toggleClass("fa-comment-o",o<=0);const i=o>99?"99+":o;m.get("chat/icon").toggleClass("unread-count",o>0).attr("data-content",i),m.get("chat/count").toggleClass("hidden",o<=0).text(i),f.fire("action:chat.updateCount",{count:o})}))};function c(h){g("onChatMessageReceived",h)}function C(h){g("onUserTyping",h)}function r(h){g("onRoomRename",h)}async function g(h,t){(await app.require("chat"))[h](t)}return n}.apply(k,p),l!==void 0&&(w.exports=l)},80431:(w,k,u)=>{var p;p=function(){const l={};l.prepareDOM=function(){const c=$('[component="notifications"] [data-bs-toggle="dropdown"]');c.length&&(c.on("show.bs.dropdown",C=>{n("loadNotifications",$(C.target).parent().find('[component="notifications/list"]'))}),c.each((C,r)=>{const g=$(r).parent().find(".dropdown-menu");g.hasClass("show")&&n("loadNotifications",g.find('[component="notifications/list"]'))}),socket.removeListener("event:new_notification",m),socket.on("event:new_notification",m),socket.removeListener("event:notifications.updateCount",f),socket.on("event:notifications.updateCount",f))};function m(c){n("onNewNotification",c)}function f(c){n("updateNotifCount",c)}function n(c,C){Promise.all([u.e(42840),u.e(70071)]).then(function(){var r=[u(69986)];(function(g){g[c](C)}).apply(null,r)}).catch(u.oe)}return l}.call(k,u,k,w),p!==void 0&&(w.exports=p)},4695:(w,k,u)=>{var p,l;p=[u(85233)],l=function(m){const f={},n={ignoring:1,notwatching:2,watching:3};f.initUnreadTopics=function(){const r=app.user.unreadData;function g(o){if(o&&o.posts&&o.posts.length&&r){const a=o.posts[0];if(parseInt(a.uid,10)===parseInt(app.user.uid,10)||!a.topic.isFollowing&&a.categoryWatchState!==n.watching)return;const i=a.topic.tid;(!r[""][i]||!r.new[i]||!r.watched[i]||!r.unreplied[i])&&t(i),r[""][i]||(h(""),r[""][i]=!0),a.isMain&&parseInt(a.uid,10)!==parseInt(app.user.uid,10)&&!r.new[i]&&(h("new"),r.new[i]=!0),parseInt(a.topic.postcount,10)<=1&&!r.unreplied[i]&&(h("unreplied"),r.unreplied[i]=!0),a.topic.isFollowing&&!r.watched[i]&&(h("watched"),r.watched[i]=!0)}}function h(o){const a="/unread"+(o?"?filter="+o:""),i=1+parseInt($('a[href="'+config.relative_path+a+'"].navigation-link i').attr("data-content"),10);C(a,i)}function t(o){$('[data-tid="'+o+'"]').addClass("unread")}$(window).on("action:ajaxify.end",function(){ajaxify.data.template.topic&&["","new","watched","unreplied"].forEach(function(o){delete r[o][ajaxify.data.tid]})}),socket.removeListener("event:new_post",g),socket.on("event:new_post",g),socket.removeListener("event:unread.updateCount",c),socket.on("event:unread.updateCount",c)};function c(r){C("/unread",r.unreadTopicCount),C("/unread?filter=new",r.unreadNewTopicCount),C("/unread?filter=watched",r.unreadWatchedTopicCount),C("/unread?filter=unreplied",r.unreadUnrepliedTopicCount)}function C(r,g){if(!utils.isNumber(g))return;g=Math.max(0,g);const h=g>99?"99+":g,t=$('a[href="'+config.relative_path+r+'"].navigation-link');t.find("i").toggleClass("unread-count",g>0).attr("data-content",h),t.find('[component="navigation/count"]').toggleClass("hidden",g<=0).text(g),$('#mobile-menu [data-unread-url="'+r+'"]').attr("data-content",h),$('[component="unread/count"][data-unread-url="'+r+'"]').toggleClass("hidden",g<=0).text(h),m.fire("action:unread.updateCount",{url:r,count:g})}return f.updateUnreadTopicCount=C,f}.apply(k,p),l!==void 0&&(w.exports=l)},78989:(w,k,u)=>{var p,l;p=[u(63281)],l=function(m){const f={};return f.init=function(){$("body").on("click",'[component="pagination/select-page"]',function(){return m.prompt("[[global:enter-page-number]]",function(n){f.loadPage(n)}),!1})},f.loadPage=function(n,c){if(c=c||function(){},n=parseInt(n,10),!utils.isNumber(n)||n<1||n>ajaxify.data.pagination.pageCount)return;const C=utils.params();C.page=n;const r=window.location.pathname+"?"+$.param(C);ajaxify.go(r,c)},f.nextPage=function(n){f.loadPage(ajaxify.data.pagination.currentPage+1,n)},f.previousPage=function(n){f.loadPage(ajaxify.data.pagination.currentPage-1,n)},f}.apply(k,p),l!==void 0&&(w.exports=l)},11120:w=>{w.exports=function(k,u,p){u.setGlobal("true",!0),u.setGlobal("false",!1);const l=24*60*60*1e3,m={displayMenuItem:n,buildMetaTag:c,buildLinkTag:C,stringify:r,escape:g,stripTags:h,buildCategoryIcon:t,buildCategoryLabel:o,generateCategoryBackground:a,generateChildrenCategories:i,generateTopicClass:d,membershipBtn:b,spawnPrivilegeStates:R,localeToHTML:A,renderTopicImage:S,renderDigestAvatar:D,userAgentIcons:x,buildAvatar:I,increment:T,generateRepliedTo:B,generateWrote:N,isoTimeToLocaleString:F,shouldHideReplyContainer:K,humanReadableNumber:j,formattedNumber:q,register:O,__escape:f};function f(e){return e}function n(e,s){const v=e.navigation[s];return!(!v||v.route.match("/users")&&e.user&&!e.user.privileges["view:users"]||v.route.match("/tags")&&e.user&&!e.user.privileges["view:tags"]||v.route.match("/groups")&&e.user&&!e.user.privileges["view:groups"])}function c(e){const s=e.name?'name="'+e.name+'" ':"",v=e.property?'property="'+e.property+'" ':"",E=e.content?'content="'+e.content.replace(/\n/g," ")+'" ':"";return"<meta "+s+v+E+`/>
	`}function C(e){const s=["link","rel","as","type","href","sizes","title","crossorigin"],[v,E,y,M,_,L,P,W]=s.map(U=>e[U]?`${U}="${e[U]}" `:"");return"<link "+v+E+y+M+L+P+_+W+`/>
	`}function r(e){return JSON.stringify(e).replace(/&/gm,"&amp;").replace(/</gm,"&lt;").replace(/>/gm,"&gt;").replace(/"/g,"&quot;")}function g(e){return k.escapeHTML(e)}function h(e){return k.stripHTMLTags(e)}function t(e,s,v){return e?`<span class="icon d-inline-flex justify-content-center align-items-center align-middle ${v}" style="${a(e)} width:${s}; height: ${s}; font-size: ${parseInt(s,10)/2}px;">${e.icon?`<i class="fa fa-fw ${e.icon}"></i>`:""}</span>`:""}function o(e,s="a",v=""){if(!e)return"";const E=s==="a"?`href="${p}/category/${e.slug}"`:"";return`<${s} ${E} class="badge px-1 text-truncate text-decoration-none ${v}" style="color: ${e.color};background-color: ${e.bgColor};border-color: ${e.bgColor}!important; max-width: 70vw;">
			${e.icon&&e.icon!=="fa-nbb-none"?`<i class="fa fa-fw ${e.icon}"></i>`:""}
			${e.name}
		</${s}>`}function a(e){if(!e)return"";const s=[];return e.bgColor&&(s.push("background-color: "+e.bgColor),s.push(`border-color: ${e.bgColor}!important`)),e.color&&s.push("color: "+e.color),e.backgroundImage&&(s.push("background-image: url("+e.backgroundImage+")"),e.imageClass&&s.push("background-size: "+e.imageClass)),s.join("; ")+";"}function i(e){let s="";return!e||!e.children||!e.children.length||(e.children.forEach(function(v){if(v&&!v.isSection){const E=v.link?v.link:p+"/category/"+v.slug;s+='<span class="category-children-item float-start"><div role="presentation" class="icon float-start" style="'+a(v)+'"><i class="fa fa-fw '+v.icon+'"></i></div><a href="'+E+'"><small>'+v.name+"</small></a></span>"}}),s=s&&'<span class="category-children">'+s+"</span>"),s}function d(e){return["locked","pinned","deleted","unread","scheduled"].filter(v=>!!e[v]).join(" ")}function b(e,s=""){return e.isMember&&e.name!=="administrators"?`<button class="btn btn-danger ${s}" data-action="leave" data-group="${e.displayName}" ${e.disableLeave?" disabled":""}><i class="fa fa-times"></i> [[groups:membership.leave-group]]</button>`:e.isPending&&e.name!=="administrators"?`<button class="btn btn-warning disabled ${s}"><i class="fa fa-clock-o"></i> [[groups:membership.invitation-pending]]</button>`:e.isInvited?`<button class="btn btn-link" data-action="rejectInvite" data-group="${e.displayName}">[[groups:membership.reject]]</button><button class="btn btn-success" data-action="acceptInvite" data-group="${e.name}"><i class="fa fa-plus"></i> [[groups:membership.accept-invitation]]</button>`:!e.disableJoinRequests&&e.name!=="administrators"?`<button class="btn btn-success" data-action="join" data-group="${e.displayName}"><i class="fa fa-plus"></i> [[groups:membership.join-group]]</button>`:""}function R(e,s,v){const E=[];for(const y in s)s.hasOwnProperty(y)&&E.push({name:y,state:s[y],type:v[y]});return E.map(function(y){const M=["groups:moderate","groups:posts:upvote","groups:posts:downvote","groups:local:login","groups:group:create"],_=["groups:find","groups:read","groups:topics:read","groups:view:users","groups:view:tags","groups:view:groups"],L=["groups:moderate"],P=e==="guests"&&(M.includes(y.name)||y.name.startsWith("groups:admin:"))||e==="spiders"&&!_.includes(y.name)||e==="Global Moderators"&&L.includes(y.name);return`
				<td data-privilege="${y.name}" data-value="${y.state}" data-type="${y.type}">
					<div class="form-check text-center">
						<input class="form-check-input float-none" autocomplete="off" type="checkbox"${y.state?" checked":""}${P?' disabled="disabled"':""} />
					</div>
				</td>
			`}).join("")}function A(e,s){return e=e||s||"en-GB",e.replace("_","-")}function S(e){return e.thumb?'<img src="'+e.thumb+'" class="img-circle user-img" title="'+e.user.username+'" />':'<img component="user/picture" data-uid="'+e.user.uid+'" src="'+e.user.picture+'" class="user-img" title="'+e.user.username+'" />'}function D(e){return e.teaser?e.teaser.user.picture?'<img style="vertical-align: middle; width: 32px; height: 32px; border-radius: 50%;" src="'+e.teaser.user.picture+'" title="'+e.teaser.user.username+'" />':'<div style="vertical-align: middle; width: 32px; height: 32px; line-height: 32px; font-size: 16px; background-color: '+e.teaser.user["icon:bgColor"]+'; color: white; text-align: center; display: inline-block; border-radius: 50%;">'+e.teaser.user["icon:text"]+"</div>":e.user.picture?'<img style="vertical-align: middle; width: 32px; height: 32px; border-radius: 50%;" src="'+e.user.picture+'" title="'+e.user.username+'" />':'<div style="vertical-align: middle; width: 32px; height: 32px; line-height: 32px; font-size: 16px; background-color: '+e.user["icon:bgColor"]+'; color: white; text-align: center; display: inline-block; border-radius: 50%;">'+e.user["icon:text"]+"</div>"}function x(e){let s="";switch(e.platform){case"Linux":s+='<i class="fa fa-fw fa-linux"></i>';break;case"Microsoft Windows":s+='<i class="fa fa-fw fa-windows"></i>';break;case"Apple Mac":s+='<i class="fa fa-fw fa-apple"></i>';break;case"Android":s+='<i class="fa fa-fw fa-android"></i>';break;case"iPad":s+='<i class="fa fa-fw fa-tablet"></i>';break;case"iPod":case"iPhone":s+='<i class="fa fa-fw fa-mobile"></i>';break;default:s+='<i class="fa fa-fw fa-question-circle"></i>';break}switch(e.browser){case"Chrome":s+='<i class="fa fa-fw fa-chrome"></i>';break;case"Firefox":s+='<i class="fa fa-fw fa-firefox"></i>';break;case"Safari":s+='<i class="fa fa-fw fa-safari"></i>';break;case"IE":s+='<i class="fa fa-fw fa-internet-explorer"></i>';break;case"Edge":s+='<i class="fa fa-fw fa-edge"></i>';break;default:s+='<i class="fa fa-fw fa-question-circle"></i>';break}return s}function I(e,s,v,E,y){e||(e=this);const M=new Map([["alt",e.username],["title",e.username],["data-uid",e.uid],["loading","lazy"]]),_=[`--avatar-size: ${s};`],L=W=>Array.from(W).reduce((U,[H,z])=>(U+=` ${H}="${z}"`,U),"");E=E||"",M.set("class",`avatar ${E}${v?" avatar-rounded":""}`);let P="";return e.picture&&(M.set("component",y||"avatar/picture"),P+="<img "+L(M)+' src="'+e.picture+'" style="'+_.join(" ")+'" onError="this.remove();" itemprop="image" />'),M.set("component",y||"avatar/icon"),_.push("background-color: "+e["icon:bgColor"]+";"),P+="<span "+L(M)+' style="'+_.join(" ")+'">'+e["icon:text"]+"</span>",P}function T(e,s){return String(e+parseInt(s,10))}function B(e,s){const v=e.parent&&e.parent.displayname?e.parent.displayname:"[[global:guest]]";return`[[topic:replied-to-user-${e.timestamp<Date.now()-s*l?"on":"ago"}, ${e.toPid}, ${p}/post/${e.toPid}, ${v}, ${p}/post/${e.pid}, ${e.timestampISO}]]`}function N(e,s){return`[[topic:wrote-${e.timestamp<Date.now()-s*l?"on":"ago"}, ${p}/post/${e.pid}, ${e.timestampISO}]]`}function F(e){return new Date(e).toLocaleString().replace(/,/g,"&#44;")}function K(e){return!!(e.replies.count<=0||e.replies.hasSingleImmediateReply)}function j(e,s=1){return k.makeNumberHumanReadable(e,s)}function q(e){return k.addCommas(e)}function O(){Object.keys(m).forEach(function(e){u.registerHelper(e,m[e])})}return m}},59265:(w,k,u)=>{var p,l;const m=u(11120);p=[u(96795),u(59006)],l=function(f,n){return m(f,n,config.relative_path)}.apply(k,p),l!==void 0&&(w.exports=l)},44882:(w,k,u)=>{var p,l;p=[u(63281),u(32230),u(66603),u(7927),u(85233)],l=function(m,f,n,c,C){const r={};let g,h;r.show=function(){C.one("action:ajaxify.end",()=>{o(),t(),r.showEmailConfirmWarning()})},r.showEmailConfirmWarning=function(a){if(!config.emailPrompt||!app.user.uid||parseInt(n.getItem("email-confirm-dismiss"),10)===1)return;const i={alert_id:"email_confirm",type:"warning",timeout:0,closefn:()=>{n.setItem("email-confirm-dismiss",1)}};!app.user.email&&!app.user.isEmailConfirmSent?(i.message="[[error:no-email-to-confirm]]",i.clickfn=function(){c.remove("email_confirm"),ajaxify.go("user/"+app.user.userslug+"/edit/email")},c.alert(i)):!app.user["email:confirmed"]&&!app.user.isEmailConfirmSent?(i.message=a||"[[error:email-not-confirmed]]",i.clickfn=function(){c.remove("email_confirm"),ajaxify.go("/me/edit/email")},c.alert(i)):!app.user["email:confirmed"]&&app.user.isEmailConfirmSent&&(i.message="[[error:email-not-confirmed-email-sent]]",c.alert(i))};function t(){!config.cookies.enabled||!navigator.cookieEnabled||app.inAdmin||n.getItem("cookieconsent")==="1"||(config.cookies.message=f.unescape(config.cookies.message),config.cookies.dismiss=f.unescape(config.cookies.dismiss),config.cookies.link=f.unescape(config.cookies.link),config.cookies.link_url=f.unescape(config.cookies.link_url),app.parseAndTranslate("partials/cookie-consent",config.cookies,function(a){$(document.body).append(a),$(document.body).addClass("cookie-consent-open");const i=$(".cookie-consent");i.find("button").on("click",function(){n.setItem("cookieconsent","1"),i.remove(),$(document.body).removeClass("cookie-consent-open")})}))}function o(){const a=utils.params({full:!0});g=a.has("loggedin"),h=a.get("register"),g&&(c.alert({type:"success",title:"[[global:welcome-back]] "+app.user.username+"!",message:"[[global:you-have-successfully-logged-in]]",timeout:5e3}),a.delete("loggedin")),h&&(m.alert({message:utils.escapeHTML(decodeURIComponent(h))}),a.delete("register")),a.has("lang")&&a.get("lang")===config.defaultLang&&(console.info(`The "lang" parameter was passed in to set the language to "${a.get("lang")}", but that is already the forum default language.`),a.delete("lang"));const i=a.toString();ajaxify.updateHistory(ajaxify.currentPage+(i?`?${i}`:"")+document.location.hash,!0)}return r.showInvalidSession=function(){m.alert({title:"[[error:invalid-session]]",message:"[[error:invalid-session-text]]",closeButton:!1,callback:function(){window.location.reload()}})},r.showSessionMismatch=function(){m.alert({title:"[[error:session-mismatch]]",message:"[[error:session-mismatch-text]]",closeButton:!1,callback:function(){window.location.reload()}})},r}.apply(k,p),l!==void 0&&(w.exports=l)},7073:(w,k,u)=>{var p,l;p=[u(32230),u(66603),u(85233),u(7927),u(73138)],l=function(m,f,n,c,C){const r={current:{}};r.init=function(t){if(!config.searchEnabled)return;t=t||{in:config.searchDefaultInQuick||"titles"},$('[component="search/form"]').each((a,i)=>{g($(i),t)})};function g(t,o){const a=t.find('[component="search/button"]'),i=t.find('[component="search/fields"]'),d=i.find('input[name="query"]'),b=i.find("#quick-search-container"),R=i.hasClass("hidden");t.find(".advanced-search-link").off("mousedown").on("mousedown",function(){ajaxify.go("/search")}),R&&d.off("blur").on("blur",function(){setTimeout(function(){d.is(":focus")||(i.addClass("hidden"),a.removeClass("hidden"))},200)}),d.off("focus");const A={inputEl:d,resultEl:b};r.enableQuickSearch({searchOptions:o,searchElements:A}),a.off("click").on("click",function(S){return!config.loggedIn&&!app.user.privileges["search:content"]?(c.alert({message:"[[error:search-requires-login]]",timeout:3e3}),ajaxify.go("login"),!1):(S.stopPropagation(),r.showAndFocusInput(t),!1)}),t.off("submit").on("submit",function(){const S=$(this).find('input[name="query"]'),D=r.getSearchPreferences();return D.term=S.val(),D.in=o.in,n.fire("action:search.submit",{searchOptions:D,searchElements:A}),r.query(D,function(){S.val(""),d.trigger("blur")}),!1})}r.enableQuickSearch=function(t){if(!config.searchEnabled||!app.user.privileges["search:content"])return;const o=Object.assign({in:config.searchDefaultInQuick||"titles"},t.searchOptions),a=t.searchElements.resultEl,i=t.searchElements.inputEl;let d=i.val();const b=a.find(".filter-category");function R(){ajaxify.data.template.category&&ajaxify.data.cid&&m.translate("[[search:search-in-category, "+ajaxify.data.name+"]]",function(x){const I=$("<div></div>").html(x).text();b.find(".name").text(I)}),b.toggleClass("hidden",!(ajaxify.data.template.category&&ajaxify.data.cid))}function A(){t.searchOptions=Object.assign({},o),t.searchOptions.term=i.val(),R(),ajaxify.data.template.category&&ajaxify.data.cid&&b.find('input[type="checkbox"]').is(":checked")&&(t.searchOptions.categories=[ajaxify.data.cid],t.searchOptions.searchChildren=!0),t.hideDuringSearch||(a.removeClass("hidden").find(".quick-search-results-container").html(""),a.find(".loading-indicator").removeClass("hidden")),n.fire("action:search.quick.start",t),t.searchOptions.searchOnly=1,r.api(t.searchOptions,function(x){if(a.find(".loading-indicator").addClass("hidden"),!x.posts||t.hideOnNoMatches&&!x.posts.length)return a.addClass("hidden").find(".quick-search-results-container").html("");x.posts.forEach(function(I){const T=$("<div>"+I.content+"</div>").text(),B=i.val().toLowerCase().replace(/^in:topic-\d+/,""),N=Math.max(0,T.toLowerCase().indexOf(B)-40);I.snippet=utils.escapeHTML((N>0?"...":"")+T.slice(N,N+80)+(T.length-N>80?"...":""))}),app.parseAndTranslate("partials/quick-search-results",x,function(I){I.length&&I.find(".timeago").timeago(),a.toggleClass("hidden",!I.length||!i.is(":focus")).find(".quick-search-results-container").html(I.length?I:"");const T=a.find(".quick-search-results .quick-search-title, .quick-search-results .snippet");r.highlightMatches(t.searchOptions.term,T),n.fire("action:search.quick.complete",{data:x,options:t})})})}a.find('.filter-category input[type="checkbox"]').on("change",function(){i.focus(),A()}),i.off("keyup").on("keyup",utils.debounce(function(){if(i.val().length<3){a.addClass("hidden"),d=i.val();return}if(i.val()!==d){if(d=i.val(),!i.is(":focus"))return a.addClass("hidden");A()}},500));let S=!1;a.on("mousedown",".quick-search-results > *",function(){$(window).one("mouseup",function(){a.addClass("hidden")}),S=!0}),i.on("blur",function(){setTimeout(function(){!i.is(":focus")&&!S&&!a.hasClass("hidden")&&a.addClass("hidden")},200)});let D=!1;n.on("action:ajaxify.end",function(){ajaxify.isCold()||(D=!0)}),i.on("focus",function(){S=!1;const x=i.val();d=x,x&&a.find("#quick-search-results").children().length&&(R(),D?(A(),D=!1):a.removeClass("hidden"),i[0].setSelectionRange(x.startsWith("in:topic")?x.indexOf(" ")+1:0,x.length))}),i.off("refresh").on("refresh",function(){A()})},r.showAndFocusInput=function(t){const o=t.parents(".dropdown-menu");if(o.length){const a=o.siblings("[data-bs-toggle]"),i=C.Dropdown.getOrCreateInstance(a[0]);i&&i.show()}else t.find('[component="search/fields"]').removeClass("hidden"),t.find('[component="search/button"]').addClass("hidden"),t.find('[component="search/fields"] input[name="query"]').trigger("focus")},r.query=function(t,o){o=o||function(){},ajaxify.go("search?"+h(t),o)},r.api=function(t,o){const a=config.relative_path+"/api/search?"+h(t);t.hasOwnProperty("searchOnly")&&delete t.searchOnly;const i=config.relative_path+"/search?"+h(t);$.get(a,function(d){d.url=i,o(d)})};function h(t){const o=t.in||"titles";let a=t.term.replace(/^[ ?#]*/,"");try{a=encodeURIComponent(a)}catch{return c.error("[[error:invalid-search-term]]")}const i={...t,term:a,in:o};return n.fire("action:search.createQueryString",{query:i,data:t}),decodeURIComponent($.param(i))}return r.getSearchPreferences=function(){try{return JSON.parse(f.getItem("search-preferences")||"{}")}catch{return{}}},r.highlightMatches=function(t,o){if(!t||!o.length)return;t=utils.escapeHTML(t.replace(/^"/,"").replace(/"$/,"").trim());const a=t.split(" ").filter(d=>d.length>1).map(function(d){return utils.escapeRegexChars(d)}).join("|"),i=new RegExp("("+a+")","gi");o.each(function(){const d=$(this),b=[];d.find("*").each(function(){$(this).after("<!-- "+b.length+" -->"),b.push($("<div></div>").append($(this)))}),d.html(d.html().replace(i,function(R,A){return'<strong class="search-match fw-bold text-decoration-underline">'+A+"</strong>"})),b.forEach(function(R,A){d.html(d.html().replace("<!-- "+A+" -->",function(){return R.html()}))})}),$(".search-result-text").find("img:not(.not-responsive)").addClass("img-fluid")},r}.apply(k,p),l!==void 0&&(w.exports=l)},66603:(w,k,u)=>{var p;p=function(){function l(){this._store={},this._keys=[]}l.prototype.isMock=!0,l.prototype.setItem=function(n,c){n=String(n),this._keys.indexOf(n)===-1&&this._keys.push(n),this._store[n]=c},l.prototype.getItem=function(n){return n=String(n),this._keys.indexOf(n)===-1?null:this._store[n]},l.prototype.removeItem=function(n){n=String(n),this._keys=this._keys.filter(function(c){return c!==n}),this._store[n]=null},l.prototype.clear=function(){this._keys=[],this._store={}},l.prototype.key=function(n){return n=parseInt(n,10)||0,this._keys[n]},Object.defineProperty&&Object.defineProperty(l.prototype,"length",{get:function(){return this._keys.length}});let m;const f=Date.now().toString();try{if(m=window.localStorage,m.setItem(f,f),m.getItem(f)!==f)throw Error("localStorage behaved unexpectedly");return m.removeItem(f),m}catch(n){console.warn(n),console.warn("localStorage failed, falling back on sessionStorage");try{if(m=window.sessionStorage,m.setItem(f,f),m.getItem(f)!==f)throw Error("sessionStorage behaved unexpectedly");return m.removeItem(f),m}catch(c){return console.warn(c),console.warn("sessionStorage failed, falling back on memory storage"),new l}}}.call(k,u,k,w),p!==void 0&&(w.exports=p)},27145:(w,k,u)=>{w=u.nmd(w);var p,l;p=[u(32230),u(85233)],l=function(m,f){const n={};let c=!1;n.init=function(){if(n.taskbar=$('[component="taskbar"]'),n.tasklist=n.taskbar.find("ul"),!n.taskbar.length||!n.tasklist.length){c=!0;return}n.taskbar.on("click","li",async function(){const t=$(this),o=t.attr("data-module"),a=t.attr("data-uuid"),i=await app.require(o);return t.hasClass("active")?i.minimize(a):(r(),i.load(a),n.toggleNew(a,!1),n.tasklist.removeClass("active"),t.addClass("active")),!1}),$(window).on("action:app.loggedOut",function(){n.closeAll()})},n.close=async function(t,o){if(c)return;if(n.tasklist.find('[data-module="'+w+'"][data-uuid="'+o+'"]').length){const i=await app.require(t);i&&typeof i.close=="function"&&i.close(o)}},n.closeAll=function(t){if(c)return;let o="[data-uuid]";t&&(o='[data-module="'+t+'"]'+o),n.tasklist.find(o).each(function(a,i){n.close(t||i.getAttribute("data-module"),i.getAttribute("data-uuid"))})},n.discard=function(t,o){if(c)return;n.tasklist.find('[data-module="'+t+'"][data-uuid="'+o+'"]').remove(),C()},n.push=function(t,o,a,i){if(i=i||function(){},c)return i();const d=n.tasklist.find('li[data-uuid="'+o+'"]'),b={module:t,uuid:o,options:a,element:d};f.fire("filter:taskbar.push",b),!d.length&&b.module?g(b,i):i(d)},n.get=function(t){return c?[]:$('[data-module="'+t+'"]').map(function(a,i){return $(i).data()})},n.minimize=function(t,o){if(c)return;n.tasklist.find('[data-module="'+t+'"][data-uuid="'+o+'"]').toggleClass("active",!1)},n.toggleNew=function(t,o,a){if(c)return;n.tasklist.find('[data-uuid="'+t+'"]').toggleClass("new",o),a||f.fire("action:taskbar.toggleNew",t)},n.updateActive=function(t){if(c)return;const o=n.tasklist.find("li");o.removeClass("active"),o.filter('[data-uuid="'+t+'"]').addClass("active"),$("[data-uuid]:not([data-module])").toggleClass("modal-unfocused",!0),$('[data-uuid="'+t+'"]:not([data-module])').toggleClass("modal-unfocused",!1)},n.isActive=function(t){return c?!1:n.tasklist.find('li[data-uuid="'+t+'"]').hasClass("active")};function C(){if(c)return;n.tasklist.find("li").length>0?n.taskbar.attr("data-active","1"):n.taskbar.removeAttr("data-active")}function r(){c||n.tasklist.find(".active").removeClass("active")}function g(t,o){if(c)return o();m.translate(t.options.title,function(a){const i=$("<div></div>").text(a||"NodeBB Task").html(),d=$("<li></li>").addClass(t.options.className).html('<a href="#"'+(t.options.image?` style="background-image: url('`+t.options.image.replace(/&#x2F;/g,"/")+`'); background-size: cover;"`:"")+">"+(t.options.icon?'<i class="fa '+t.options.icon+'"></i> ':"")+'<span aria-label="'+i+'" component="taskbar/title">'+i+"</span></a>").attr({title:i,"data-module":t.module,"data-uuid":t.uuid}).addClass(t.options.state!==void 0?t.options.state:"active");(!t.options.state||t.options.state==="active")&&r(),n.tasklist.append(d),C(),t.element=d,d.data(t),f.fire("action:taskbar.pushed",t),o(d)})}const h=function(t,o,a){switch(o){case"title":t.find('[component="taskbar/title"]').text(a);break;case"icon":t.find("i").attr("class","fa fa-"+a);break;case"image":t.find("a").css("background-image",a?'url("'+a.replace(/&#x2F;/g,"/")+'")':"");break;case"background-color":t.find("a").css("background-color",a);break;case"color":t.find("a").css("color",a);break}};return n.update=function(t,o,a){if(c)return;const i=n.tasklist.find('[data-module="'+t+'"][data-uuid="'+o+'"]');if(!i.length)return;const d=i.data();Object.keys(a).forEach(function(b){d[b]=a[b],h(i,b,a[b])}),i.data(d)},n}.apply(k,p),l!==void 0&&(w.exports=l)}}]);

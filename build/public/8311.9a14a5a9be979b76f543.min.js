(self.webpackChunknodebb=self.webpackChunknodebb||[]).push([[8311,38786,62735,10882,28306,43034,92497,76830],{47913:(p,v,l)=>{p.exports=l(66485)},45482:(p,v,l)=>{p.exports=l(35729)},83713:(p,v,l)=>{p.exports=l(51077)},38259:(p,v,l)=>{p.exports=l(65616)},66603:(p,v,l)=>{"use strict";var g;g=function(){function d(){this._store={},this._keys=[]}d.prototype.isMock=!0,d.prototype.setItem=function(e,s){e=String(e),this._keys.indexOf(e)===-1&&this._keys.push(e),this._store[e]=s},d.prototype.getItem=function(e){return e=String(e),this._keys.indexOf(e)===-1?null:this._store[e]},d.prototype.removeItem=function(e){e=String(e),this._keys=this._keys.filter(function(s){return s!==e}),this._store[e]=null},d.prototype.clear=function(){this._keys=[],this._store={}},d.prototype.key=function(e){return e=parseInt(e,10)||0,this._keys[e]},Object.defineProperty&&Object.defineProperty(d.prototype,"length",{get:function(){return this._keys.length}});let b;const a=Date.now().toString();try{if(b=window.localStorage,b.setItem(a,a),b.getItem(a)!==a)throw Error("localStorage behaved unexpectedly");return b.removeItem(a),b}catch(e){console.warn(e),console.warn("localStorage failed, falling back on sessionStorage");try{if(b=window.sessionStorage,b.setItem(a,a),b.getItem(a)!==a)throw Error("sessionStorage behaved unexpectedly");return b.removeItem(a),b}catch(s){return console.warn(s),console.warn("sessionStorage failed, falling back on memory storage"),new d}}}.call(v,l,v,p),g!==void 0&&(p.exports=g)},27145:(p,v,l)=>{"use strict";p=l.nmd(p);var g,d;g=[l(32230),l(85233)],d=function(b,a){const e={};let s=!1;e.init=function(){if(e.taskbar=$('[component="taskbar"]'),e.tasklist=e.taskbar.find("ul"),!e.taskbar.length||!e.tasklist.length){s=!0;return}e.taskbar.on("click","li",async function(){const t=$(this),n=t.attr("data-module"),i=t.attr("data-uuid"),o=await app.require(n);return t.hasClass("active")?o.minimize(i):(f(),o.load(i),e.toggleNew(i,!1),e.tasklist.removeClass("active"),t.addClass("active")),!1}),$(window).on("action:app.loggedOut",function(){e.closeAll()})},e.close=async function(t,n){if(s)return;if(e.tasklist.find('[data-module="'+p+'"][data-uuid="'+n+'"]').length){const o=await app.require(t);o&&typeof o.close=="function"&&o.close(n)}},e.closeAll=function(t){if(s)return;let n="[data-uuid]";t&&(n='[data-module="'+t+'"]'+n),e.tasklist.find(n).each(function(i,o){e.close(t||o.getAttribute("data-module"),o.getAttribute("data-uuid"))})},e.discard=function(t,n){if(s)return;e.tasklist.find('[data-module="'+t+'"][data-uuid="'+n+'"]').remove(),c()},e.push=function(t,n,i,o){if(o=o||function(){},s)return o();const r=e.tasklist.find('li[data-uuid="'+n+'"]'),u={module:t,uuid:n,options:i,element:r};a.fire("filter:taskbar.push",u),!r.length&&u.module?w(u,o):o(r)},e.get=function(t){return s?[]:$('[data-module="'+t+'"]').map(function(i,o){return $(o).data()})},e.minimize=function(t,n){if(s)return;e.tasklist.find('[data-module="'+t+'"][data-uuid="'+n+'"]').toggleClass("active",!1)},e.toggleNew=function(t,n,i){if(s)return;e.tasklist.find('[data-uuid="'+t+'"]').toggleClass("new",n),i||a.fire("action:taskbar.toggleNew",t)},e.updateActive=function(t){if(s)return;const n=e.tasklist.find("li");n.removeClass("active"),n.filter('[data-uuid="'+t+'"]').addClass("active"),$("[data-uuid]:not([data-module])").toggleClass("modal-unfocused",!0),$('[data-uuid="'+t+'"]:not([data-module])').toggleClass("modal-unfocused",!1)},e.isActive=function(t){return s?!1:e.tasklist.find('li[data-uuid="'+t+'"]').hasClass("active")};function c(){if(s)return;e.tasklist.find("li").length>0?e.taskbar.attr("data-active","1"):e.taskbar.removeAttr("data-active")}function f(){s||e.tasklist.find(".active").removeClass("active")}function w(t,n){if(s)return n();b.translate(t.options.title,function(i){const o=$("<div></div>").text(i||"NodeBB Task").html(),r=$("<li></li>").addClass(t.options.className).html('<a href="#"'+(t.options.image?` style="background-image: url('`+t.options.image.replace(/&#x2F;/g,"/")+`'); background-size: cover;"`:"")+">"+(t.options.icon?'<i class="fa '+t.options.icon+'"></i> ':"")+'<span aria-label="'+o+'" component="taskbar/title">'+o+"</span></a>").attr({title:o,"data-module":t.module,"data-uuid":t.uuid}).addClass(t.options.state!==void 0?t.options.state:"active");(!t.options.state||t.options.state==="active")&&f(),e.tasklist.append(r),c(),t.element=r,r.data(t),a.fire("action:taskbar.pushed",t),n(r)})}const A=function(t,n,i){switch(n){case"title":t.find('[component="taskbar/title"]').text(i);break;case"icon":t.find("i").attr("class","fa fa-"+i);break;case"image":t.find("a").css("background-image",i?'url("'+i.replace(/&#x2F;/g,"/")+'")':"");break;case"background-color":t.find("a").css("background-color",i);break;case"color":t.find("a").css("color",i);break}};return e.update=function(t,n,i){if(s)return;const o=e.tasklist.find('[data-module="'+t+'"][data-uuid="'+n+'"]');if(!o.length)return;const r=o.data();Object.keys(i).forEach(function(u){r[u]=i[u],A(o,u,i[u])}),o.data(r)},e}.apply(v,g),d!==void 0&&(p.exports=d)},66485:(p,v,l)=>{"use strict";var g,d;g=[l(74344),l(7927)],d=function(b,a){const e={};e.init=function(t,n){const i=t.find(".draft-icon"),o=t.attr("data-uuid");function r(){$(`[component="composer"][data-uuid="${o}"]`).length&&(n.save_id||(n.save_id=utils.generateSaveId(app.user.uid)),e.addToDraftList("available",n.save_id),e.addToDraftList("open",n.save_id),f(t,i,n))}t.on("keyup","textarea, input.handle, input.title",utils.debounce(r,1e3)),t.on("click",'input[type="checkbox"]',utils.debounce(r,1e3)),t.on("click",'[component="category/list"] [data-cid]',utils.debounce(r,1e3)),t.on("itemAdded",".tags",utils.debounce(r,1e3)),t.on("thumb.uploaded",r),i.on("animationend",function(){$(this).toggleClass("active",!1)}),$(window).on("unload",function(){const u=e.getList("open");u.length&&u.forEach(h=>e.removeFromDraftList("open",h))}),e.migrateGuest(),e.migrateThumbs(...arguments)};function c(t){return parseInt(t,10)>0?localStorage:sessionStorage}e.get=function(t){if(!t)return null;const n=t.split(":")[1],i=c(n);try{const o=i.getItem(t),r=JSON.parse(o)||null;if(!r)throw new Error(`can't parse draft json for ${t}`);return r.save_id=t,r.timestamp&&(r.timestampISO=utils.toISOString(r.timestamp)),$(window).trigger("action:composer.drafts.get",{save_id:t,draft:r,storage:i}),r}catch{return console.warn(`[composer/drafts] Could not get draft ${t}, removing`),e.removeFromDraftList("available"),e.removeFromDraftList("open"),null}};function f(t,n,i){if(A(app.user.uid?"localStorage":"sessionStorage")&&i&&i.save_id&&t.length){const o=t.find("input.title"),r=o&&o.length&&o.val(),u=t.find("textarea").val(),h=c(app.user.uid);if(u.length||r&&r.length){const E={save_id:i.save_id,action:i.action,text:u,uuid:t.attr("data-uuid"),timestamp:Date.now()};if(i.action==="topics.post"){const z=t.find("input.tags").val();E.tags=z,E.title=r,E.cid=i.cid}else i.action==="posts.reply"?(E.title=i.title,E.tid=i.tid,E.toPid=i.toPid):i.action==="posts.edit"&&(E.pid=i.pid,E.title=r||i.title);app.user.uid||(E.handle=t.find("input.handle").val()),h.setItem(i.save_id,JSON.stringify(E)),$(window).trigger("action:composer.drafts.save",{storage:h,postData:i,postContainer:t}),n.toggleClass("active",!0)}else e.removeDraft(i.save_id)}}e.removeDraft=function(t){if(!t)return;e.removeFromDraftList("available",t),e.removeFromDraftList("open",t);const n=t.split(":")[1],i=c(n);i.removeItem(t),$(window).trigger("action:composer.drafts.remove",{storage:i,save_id:t})},e.getList=function(t){try{const n=localStorage.getItem(`drafts:${t}`);return JSON.parse(n)||[]}catch{return console.warn("[composer/drafts] Could not read list of available drafts"),[]}},e.addToDraftList=function(t,n){if(!A(app.user.uid?"localStorage":"sessionStorage")||!n)return;const i=e.getList(t);i.includes(n)||(i.push(n),localStorage.setItem("drafts:"+t,JSON.stringify(i)))},e.removeFromDraftList=function(t,n){if(!A(app.user.uid?"localStorage":"sessionStorage")||!n)return;const i=e.getList(t);i.includes(n)&&(i.splice(i.indexOf(n),1),localStorage.setItem("drafts:"+t,JSON.stringify(i)))},e.migrateGuest=function(){if(A("localStorage")&&app.user.uid){const t=/^composer:\d+:\d$/,n=Object.keys(sessionStorage).filter(function(r){return t.test(r)}),i=new Set([]),o=n.map(function(r){const u=r.split(":");return u[1]=app.user.uid,i.add(u.join(":")),u.join(":")});return n.forEach(function(r,u){localStorage.setItem(o[u],sessionStorage.getItem(r)),sessionStorage.removeItem(r)}),i.forEach(function(r){e.addToDraftList("available",r)}),i}},e.migrateThumbs=function(t,n){if(!app.uid)return;const i=t.attr("data-uuid"),o=e.get(n.save_id);o&&o.uuid&&b.put(`/topics/${o.uuid}/thumbs`,{tid:i}).then(()=>{Promise.all([l.e(66177),l.e(62526),l.e(61006),l.e(18099),l.e(10830),l.e(59330)]).then(function(){var r=[l(44541)];(function(u){u.updateThumbCount(i,t)}).apply(null,r)}).catch(l.oe)})},e.listAvailable=function(){return e.getList("available").map(e.get)},e.getAvailableCount=function(){return e.listAvailable().length},e.open=function(t){if(!t)return;const n=e.get(t);w(t,n)},e.loadOpen=function(){if(ajaxify.data.template.login||ajaxify.data.template.register||config.hasOwnProperty("openDraftsOnPageLoad")&&!config.openDraftsOnPageLoad)return;const t=e.getList("available"),n=e.getList("open");t.length&&t.forEach(function(i){if(!i||n.includes(i))return;const o=e.get(i);if(!o||!o.text&&!o.title){e.removeFromDraftList("available",i),e.removeFromDraftList("open",i);return}w(i,o)})};function w(t,n){const o=t.split(":")[1];parseInt(app.user.uid,10)===parseInt(o,10)&&Promise.all([l.e(66177),l.e(62526),l.e(61006),l.e(18099),l.e(10830),l.e(59330)]).then(function(){var r=[l(44541)];(function(u){n.action==="topics.post"?u.newTopic({save_id:n.save_id,cid:n.cid,handle:app.user&&app.user.uid?void 0:utils.escapeHTML(n.handle),title:utils.escapeHTML(n.title),body:n.text,tags:String(n.tags||"").split(",")}):n.action==="posts.reply"?b.get("/topics/"+n.tid,{},function(h,E){if(h)return a.error(h);u.newReply({save_id:n.save_id,tid:n.tid,toPid:n.toPid,title:E.title,body:n.text})}):n.action==="posts.edit"&&u.editPost({save_id:n.save_id,pid:n.pid,title:n.title?utils.escapeHTML(n.title):void 0,body:n.text})}).apply(null,r)}).catch(l.oe)}function A(t){var n;try{n=window[t];var i="__storage_test__";return n.setItem(i,i),n.removeItem(i),!0}catch(o){return o instanceof DOMException&&(o.code===22||o.code===1014||o.name==="QuotaExceededError"||o.name==="NS_ERROR_DOM_QUOTA_REACHED")&&n&&n.length!==0}}return e}.apply(v,g),d!==void 0&&(p.exports=d)},35729:(p,v,l)=>{"use strict";var g,d;g=[l(83713),l(38259),l(62023),l(10577)],d=function(b,a,e,s){var c={},f={picture:function(){var t=this;t.find("#files").click()},upload:function(){var t=this;t.find("#files").click()},thumbs:function(){c.exitFullscreen();var t=this;Promise.all([l.e(61006),l.e(18099),l.e(10830),l.e(92497)]).then(function(){var n=[l(44541)];(function(i){const o=t.get(0).getAttribute("data-uuid"),r=i.posts[o];(r.action==="topics.post"||r.action==="posts.edit"&&r.isMain)&&e.modal.open({id:o,pid:r.pid}).then(()=>{t.trigger("thumb.uploaded"),i.updateThumbCount(o,t)})}).apply(null,n)}).catch(l.oe)},tags:function(){var t=this;t.find(".tags-container").toggleClass("hidden")},zen:function(){var t=this;$(window).one("resize",function(){function n(){s.isFullscreen||(app.toggleNavbar(!0),$("html").removeClass("zen-mode"),a.reposition(t),$(window).off("resize",n))}s.isFullscreen&&(app.toggleNavbar(!1),$("html").addClass("zen-mode"),t.find(".write").focus(),$(window).on("resize",n),$(window).one("action:composer.topics.post action:composer.posts.reply action:composer.posts.edit action:composer.discard",s.exit))}),s.toggle(t.get(0)),$(window).trigger("action:composer.fullscreen",{postContainer:t})}},w=[];c.exitFullscreen=function(){s.isEnabled&&s.isFullscreen&&s.exit()},c.addComposerButtons=function(){const t=$(".formatting-bar"),n=t.find(".formatting-group #fileForm");w.forEach(o=>{let r="";Array.isArray(o.dropdownItems)&&o.dropdownItems.length?r=A(o):r=`
					<li data-format="${o.name}" title="${o.title||""}" href="#" class="btn btn-sm btn-link text-reset position-relative" tabindex="-1">
						<i class="${o.iconClass}"></i>
					</li>
				`,n.before(r)}),t.find(".formatting-group>li").tooltip({container:"#content",animation:!1,trigger:"manual"}).on("mouseenter",function(o){const r=$(o.target);r.hasClass("dropdown-menu")||!!r.parents(".dropdown-menu").length||$(this).tooltip("show")}).on("click mouseleave",function(){$(this).tooltip("hide")})};function A(t){const n=t.dropdownItems.map(function(i){let o="";return i.badge&&(o='<span class="px-1 position-absolute top-0 start-100 translate-middle-x badge rounded text-bg-info"></span>'),`
				<li data-format="${i.name}">
					<a href="#" class="dropdown-item rounded-1 position-relative">
						<i class="${i.iconClass} text-secondary"></i> ${i.text}
						${o}
					</a>
				</li>
			`});return`
			<li class="dropdown bottom-sheet" tab-index="-1" title="${t.title}">
				<button class="btn btn-sm btn-link text-reset" data-bs-toggle="dropdown" >
					<i class="${t.iconClass}"></i>
				</button>
				<ul class="dropdown-menu p-1">
				${n}
				</ul>
			</li>
		`}return c.addButton=function(t,n,i,o){o=o||t.replace("fa fa-",""),f[o]=n,w.push({name:o,iconClass:t,title:i})},c.addDropdown=function(t){w.push({iconClass:t.iconClass,title:t.title,dropdownItems:t.dropdownItems}),t.dropdownItems.forEach(n=>{n.name&&n.onClick&&(f[n.name]=n.onClick)})},c.getDispatchTable=function(){return f},c.addButtonDispatch=function(t,n){f[t]=n},c.addHandler=function(t){t.on("click",".formatting-bar li[data-format]",function(n){var i=$(this).attr("data-format"),o=$(this).parents('[component="composer"]').find("textarea")[0];f.hasOwnProperty(i)&&(f[i].call(t,o,o.selectionStart,o.selectionEnd,n),b.render(t))})},c}.apply(v,g),d!==void 0&&(p.exports=d)},51077:(p,v,l)=>{"use strict";var g,d;g=[l(85233)],d=function(b){var a={};return a.render=function(e,s){if(s=s||function(){},!e.find(".preview-container").is(":visible"))return s();var c=e.find("textarea");socket.emit("plugins.composer.renderPreview",c.val(),function(f,w){f||(w=$("<div>"+w+"</div>"),w.find("img:not(.not-responsive)").addClass("img-fluid"),e.find(".preview").html(w),b.fire("action:composer.preview",{postContainer:e,preview:w}),s())})},a.matchScroll=function(e){if(e.find(".preview-container").is(":visible")){var s=e.find("textarea"),c=e.find(".preview");if(s.length&&c.length){var f=s[0].scrollHeight-s.height();if(f===0)return;var w=s.scrollTop()/f;c.scrollTop(Math.max(c[0].scrollHeight-c.height(),0)*w)}}},a.handleToggler=function(e){const s=e.get(0);a.env=utils.findBootstrapEnvironment();const c=["xs","sm"].includes(a.env),f=s.querySelector('.formatting-bar [data-action="preview"]'),w=f.querySelector(".show-text"),A=f.querySelector(".hide-text"),t=localStorage.getItem("composer:previewToggled"),n=config["composer-default"].hidePreviewOnOpen==="on";let i=!c&&(t===null&&!n||t==="true");const o=s.querySelector(".preview-container"),r=s.querySelector(".write-container");if(!f)return;function u(h){c?(o.classList.toggle("hide",!1),r.classList.toggle("maximized",!1),o.classList.toggle("d-none",!h),o.classList.toggle("d-flex",h),o.classList.toggle("w-100",h),r.classList.toggle("d-flex",!h),r.classList.toggle("d-none",h),r.classList.toggle("w-100",!h)):(o.classList.toggle("hide",!h),r.classList.toggle("w-50",h),r.classList.toggle("w-100",!h),localStorage.setItem("composer:previewToggled",h)),w.classList.toggle("hide",h),A.classList.toggle("hide",!h),h&&a.render(e),a.matchScroll(e)}a.toggle=u,f.addEventListener("click",h=>{h.button===0&&(i=!i,u(i))}),u(i)},a}.apply(v,g),d!==void 0&&(p.exports=d)},65616:(p,v,l)=>{"use strict";var g,d;g=[l(27145)],d=function(b){var a={},e=0,s=.3,c=.05,f=768,w=$("body"),A=$(window),t=$('[component="navbar"]');const n=document.getElementById("content");var i=t[0];function o(){return localStorage.getItem("composer:resizeRatio")||.5}function r(m){localStorage.setItem("composer:resizeRatio",Math.min(m,1))}function u(){var m;i?m=i.getBoundingClientRect():m={bottom:0};var S=Math.max(m.bottom,0),x={top:0,left:0,right:window.innerWidth,bottom:window.innerHeight};return x.width=x.right,x.height=x.bottom,x.boundedTop=S,x.boundedHeight=x.bottom-S,x}function h(m,S){var x=u(),F=m[0],C=window.getComputedStyle(F),T=parseInt(C.getPropertyValue("min-height"),10),P=Math.max(T/window.innerHeight,s);if(x.width>=f){const M=(x.height-x.boundedHeight)/x.height;S=Math.min(Math.max(S,P+M),1);var L=S*x.boundedHeight/x.height;F.style.top=((1-L)*100).toString()+"%";var D=F.getBoundingClientRect();n.style.paddingBottom=(D.bottom-D.top).toString()+"px"}else F.style.top=0,n.style.paddingBottom=0;m.ratio=S,b.updateActive(m.attr("data-uuid"))}var E=h,z=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame;return z&&(E=function(m,S){z(function(){h(m,S),setTimeout(function(){A.trigger("action:composer.resize"),m.trigger("action:composer.resize")},0)})}),a.reposition=function(m){var S=o();S>=1-c&&(S=1,m.addClass("maximized")),E(m,S)},a.maximize=function(m,S){S?E(m,1):a.reposition(m)},a.handleResize=function(m){var S=0,x=0,F=0,C=m.find(".resizer"),T=C[0];function P(y){var k=T.getBoundingClientRect(),I=(k.top+k.bottom)/2;S=(I-y.clientY)/2,x=y.clientY,A.on("mousemove",L),A.on("mouseup",D),w.on("touchmove",M)}function L(y){var k=y.clientY-S,I=u(),R=(I.height-k)/I.boundedHeight;E(m,R)}function D(y){y.preventDefault(),F=y.clientY,m.find("textarea").focus(),A.off("mousemove",L),A.off("mouseup",D),w.off("touchmove",M);var k=F-S,I=u(),R=(I.height-k)/I.boundedHeight;F-x===0&&m.hasClass("maximized")?(m.removeClass("maximized"),R=!e||e>=1-c?.5:e,E(m,R)):F-x===0||R>=1-c?(E(m,1),m.addClass("maximized"),e=R):m.removeClass("maximized"),r(R)}function M(y){y.preventDefault(),L(y.touches[0])}C.on("mousedown",function(y){y.button===0&&(y.preventDefault(),P(y))}).on("touchstart",function(y){y.preventDefault(),P(y.touches[0])}).on("touchend",D)},a}.apply(v,g),d!==void 0&&(p.exports=d)},10577:p=>{/*!
* screenfull
* v5.2.0 - 2021-11-03
* (c) Sindre Sorhus; MIT License
*/(function(){"use strict";var v=typeof window<"u"&&typeof window.document<"u"?window.document:{},l=p.exports,g=function(){for(var a,e=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]],s=0,c=e.length,f={};s<c;s++)if(a=e[s],a&&a[1]in v){for(s=0;s<a.length;s++)f[e[0][s]]=a[s];return f}return!1}(),d={change:g.fullscreenchange,error:g.fullscreenerror},b={request:function(a,e){return new Promise(function(s,c){var f=function(){this.off("change",f),s()}.bind(this);this.on("change",f),a=a||v.documentElement;var w=a[g.requestFullscreen](e);w instanceof Promise&&w.then(f).catch(c)}.bind(this))},exit:function(){return new Promise(function(a,e){if(!this.isFullscreen){a();return}var s=function(){this.off("change",s),a()}.bind(this);this.on("change",s);var c=v[g.exitFullscreen]();c instanceof Promise&&c.then(s).catch(e)}.bind(this))},toggle:function(a,e){return this.isFullscreen?this.exit():this.request(a,e)},onchange:function(a){this.on("change",a)},onerror:function(a){this.on("error",a)},on:function(a,e){var s=d[a];s&&v.addEventListener(s,e,!1)},off:function(a,e){var s=d[a];s&&v.removeEventListener(s,e,!1)},raw:g};if(!g){l?p.exports={isEnabled:!1}:window.screenfull={isEnabled:!1};return}Object.defineProperties(b,{isFullscreen:{get:function(){return!!v[g.fullscreenElement]}},element:{enumerable:!0,get:function(){return v[g.fullscreenElement]}},isEnabled:{enumerable:!0,get:function(){return!!v[g.fullscreenEnabled]}}}),l?p.exports=b:window.screenfull=b})()}}]);

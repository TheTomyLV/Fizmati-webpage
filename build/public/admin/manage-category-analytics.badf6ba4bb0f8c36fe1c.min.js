"use strict";(self.webpackChunknodebb=self.webpackChunknodebb||[]).push([[39604,66623,49286],{20820:(C,p,d)=>{d.r(p),d.d(p,{init:()=>m});var r=d(69449),u=d(50548),h=d.n(u);r.kL.register(r.ST,r.uw,r.f$,r.jn,r.od,r.u,r.Gu);function m(){u.init($('[component="category-selector"]'),{onSelect:function(o){ajaxify.go("admin/manage/categories/"+o.cid+"/analytics")},showLinks:!0,template:"admin/partials/category/selector-dropdown-right"});const y=document.getElementById("pageviews:hourly"),c=document.getElementById("pageviews:daily"),e=document.getElementById("topics:daily"),t=document.getElementById("posts:daily"),l=utils.getHoursArray().map(function(o,s){return s%3?"":o}),n=utils.getDaysArray().map(function(o,s){return s%3?"":o});utils.isMobile()&&(r.kL.defaults.plugins.tooltip.enabled=!1);const a={label:"",fill:!0,tension:.25,pointHoverBackgroundColor:"#fff",pointBorderColor:"#fff"},g={"pageviews:hourly":{labels:l,datasets:[{...a,backgroundColor:"rgba(186,139,175,0.2)",borderColor:"rgba(186,139,175,1)",pointBackgroundColor:"rgba(186,139,175,1)",pointHoverBorderColor:"rgba(186,139,175,1)",data:ajaxify.data.analytics["pageviews:hourly"]}]},"pageviews:daily":{labels:n,datasets:[{...a,backgroundColor:"rgba(151,187,205,0.2)",borderColor:"rgba(151,187,205,1)",pointBackgroundColor:"rgba(151,187,205,1)",pointHoverBorderColor:"rgba(151,187,205,1)",data:ajaxify.data.analytics["pageviews:daily"]}]},"topics:daily":{labels:n.slice(-7),datasets:[{...a,backgroundColor:"rgba(171,70,66,0.2)",borderColor:"rgba(171,70,66,1)",pointBackgroundColor:"rgba(171,70,66,1)",pointHoverBorderColor:"rgba(171,70,66,1)",data:ajaxify.data.analytics["topics:daily"]}]},"posts:daily":{labels:n.slice(-7),datasets:[{...a,backgroundColor:"rgba(161,181,108,0.2)",borderColor:"rgba(161,181,108,1)",pointBackgroundColor:"rgba(161,181,108,1)",pointHoverBorderColor:"rgba(161,181,108,1)",data:ajaxify.data.analytics["posts:daily"]}]}};y.width=$(y).parent().width(),c.width=$(c).parent().width(),e.width=$(e).parent().width(),t.width=$(t).parent().width();const i={responsive:!0,animation:!1,scales:{y:{beginAtZero:!0}}};new r.kL(y.getContext("2d"),{type:"line",data:g["pageviews:hourly"],options:i}),new r.kL(c.getContext("2d"),{type:"line",data:g["pageviews:daily"],options:i}),new r.kL(e.getContext("2d"),{type:"line",data:g["topics:daily"],options:i}),new r.kL(t.getContext("2d"),{type:"line",data:g["posts:daily"],options:i})}},22905:(C,p,d)=>{var r,u;r=[d(7927),d(73138)],u=function(h,m){const y={};return y.init=function(c,e){let t=null;e=e||{},e.privilege=e.privilege||"topics:read",e.states=e.states||["watching","notwatching","ignoring"],e.cacheList=e.hasOwnProperty("cacheList")?e.cacheList:!0;let l=[];Array.isArray(e.localCategories)&&(l=e.localCategories.map(o=>({...o}))),e.selectedCids=e.selectedCids||ajaxify.data.selectedCids||[];const n=c.find('[component="category-selector-search"]');if(!n.length)return;const a=n.parent('[component="category/dropdown"]').length>0||n.parent('[component="category-selector"]').length>0;c.on("show.bs.dropdown",function(){a&&(c.find(".dropdown-toggle").css({visibility:"hidden"}),n.removeClass("hidden"),n.css({"z-index":c.find(".dropdown-toggle").css("z-index")+1}));function o(){const s=n.find("input").val();s.length>1||!s&&!t?g(s,function(f){t=e.cacheList&&(t||f),i(f)}):!s&&t&&i(t)}n.on("click",function(s){s.preventDefault(),s.stopPropagation()}),n.find("input").val("").on("keyup",utils.debounce(o,300)),o()}),c.on("shown.bs.dropdown",function(){["xs","sm"].includes(utils.findBootstrapEnvironment())||n.find("input").focus()}),c.on("hide.bs.dropdown",function(){a&&(c.find(".dropdown-toggle").css({visibility:"inherit"}),n.addClass("hidden")),n.off("click"),n.find("input").off("keyup")});function g(o,s){socket.emit("categories.categorySearch",{search:o,query:utils.params(),parentCid:e.parentCid||0,selectedCids:e.selectedCids,privilege:e.privilege,states:e.states,showLinks:e.showLinks},function(f,b){if(f)return h.error(f);s(l.concat(b))})}function i(o){const s=e.selectedCids.map(String);o.forEach(function(f){f.selected=s.includes(String(f.cid))}),app.parseAndTranslate(e.template,{categoryItems:o.slice(0,200),selectedCategory:ajaxify.data.selectedCategory,allCategoriesUrl:ajaxify.data.allCategoriesUrl},function(f){c.find('[component="category/list"]').html(f.find('[component="category/list"]').html()),c.find('[component="category/list"] [component="category/no-matches"]').toggleClass("hidden",!!o.length);const b=m.Dropdown.getInstance(c.find(".dropdown-toggle").get(0));b&&b.update()})}},y}.apply(p,r),u!==void 0&&(C.exports=u)},50548:(C,p,d)=>{var r,u;r=[d(22905),d(63281),d(85233),d(32230)],u=function(h,m,y,c){const e={};return e.init=function(t,l){if(!t||!t.length)return;l=l||{};const n=l.onSelect||function(){};l.states=l.states||["watching","notwatching","ignoring"],l.template=l.template||"partials/category/selector-dropdown-left",y.fire("action:category.selector.options",{el:t,options:l}),h.init(t,l);const a={el:t,selectedCategory:null};t.on("click","[data-cid]",function(){const i=$(this);return i.hasClass("disabled")?!1:(a.selectCategory(i.attr("data-cid")),n(a.selectedCategory))});let g=a.el.find('[component="category-selector-selected"]').html();return c.translate(g,i=>{g=i}),a.selectCategory=function(i){const o=a.el.find('[data-cid="'+i+'"]');a.selectedCategory={cid:i,name:o.attr("data-name")},o.length?a.el.find('[component="category-selector-selected"]').html(o.find('[component="category-markup"]').html()):a.el.find('[component="category-selector-selected"]').html(g)},a.getSelectedCategory=function(){return a.selectedCategory},a.getSelectedCid=function(){return a.selectedCategory?a.selectedCategory.cid:0},l.hasOwnProperty("selectedCategory")&&app.parseAndTranslate(l.template,{selectedCategory:l.selectedCategory},function(i){a.el.find('[component="category-selector-selected"]').html(i.find('[component="category-selector-selected"]').html())}),a},e.modal=function(t){t=t||{},t.onSelect=t.onSelect||function(){},t.onSubmit=t.onSubmit||function(){},app.parseAndTranslate("admin/partials/categories/select-category",{message:t.message},function(l){const n=m.dialog({title:t.title||"[[modules:composer.select-category]]",message:l,buttons:{save:{label:"[[global:select]]",className:"btn-primary",callback:g}}}),a=e.init(n.find('[component="category-selector"]'),t);function g(i){return i.preventDefault(),a.selectedCategory&&(t.onSubmit(a.selectedCategory),n.modal("hide")),!1}t.openOnLoad&&n.on("shown.bs.modal",function(){n.find(".dropdown-toggle").dropdown("toggle")}),n.find("form").on("submit",g)})},e}.apply(p,r),u!==void 0&&(C.exports=u)}}]);

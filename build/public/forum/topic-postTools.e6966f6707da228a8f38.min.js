"use strict";(self.webpackChunknodebb=self.webpackChunknodebb||[]).push([[54610,38786,70565,40549,83014,99617,80560,73382,38818,28306],{54939:(W,S,a)=>{var h,p;h=[a(78942),a(42840),a(7237),a(32230),a(13578),a(74344),a(63281),a(7927),a(85233),a(59265)],p=function(f,v,u,y,P,b,T,w,A,B){const D={};let l=!1;D.init=function(e){l=!1,d(),c(e),f.addShareHandlers(ajaxify.data.titleRaw),P.addVoteHandler(),D.updatePostCount(ajaxify.data.postcount)};function d(){document.querySelector('[component="topic"]')&&$('[component="topic"]').on("show.bs.dropdown",".moderator-tools",function(){const n=$(this),i=n.find(".dropdown-menu"),{top:o}=this.getBoundingClientRect();if(n.toggleClass("dropup",o>window.innerHeight/2),i.attr("data-loaded"))return;const s=n.parents("[data-pid]"),r=s.attr("data-pid"),I=parseInt(s.attr("data-index"),10);socket.emit("posts.loadPostTools",{pid:r},async(m,M)=>{if(m)return w.error(m);M.posts.display_move_tools=M.posts.display_move_tools&&I!==0;const k=await app.parseAndTranslate("partials/topic/post-menu-list",M),N=a(42152);i.attr("data-loaded","true").html(k),new N("[data-clipboard-text]"),A.fire("action:post.tools.load",{element:i})})})}D.toggle=function(e,n){const i=u.get("post","pid",e);i.find('[component="post/quote"], [component="post/bookmark"], [component="post/reply"], [component="post/flag"], [component="user/chat"]').toggleClass("hidden",n),i.find('[component="post/delete"]').toggleClass("hidden",n).parent().attr("hidden",n?"":null),i.find('[component="post/restore"]').toggleClass("hidden",!n).parent().attr("hidden",n?null:""),i.find('[component="post/purge"]').toggleClass("hidden",!n).parent().attr("hidden",n?null:""),D.removeMenu(i)},D.removeMenu=function(e){e.find('[component="post/tools"] .dropdown-menu').removeAttr("data-loaded").html("")},D.updatePostCount=function(e){u.get("topic/post-count").attr("title",e).html(B.humanReadableNumber(e)),v.setCount(e)};function c(e){const n=u.get("topic");Y(),n.on("click",'[component="post/quote"]',function(){g($(this),e)}),n.on("click",'[component="post/reply"]',function(){E($(this),e)}),$(".topic").on("click",'[component="topic/reply"]',function(o){o.preventDefault(),E($(this),e)}),$(".topic").on("click",'[component="topic/reply-as-topic"]',function(){y.translate(`[[topic:link-back, ${ajaxify.data.titleRaw}, ${config.relative_path}/topic/${ajaxify.data.slug}]]`,function(o){A.fire("action:composer.topic.new",{cid:ajaxify.data.cid,body:o})})}),n.on("click",'[component="post/bookmark"]',function(){return C($(this),R($(this),"data-pid"))}),n.on("click",'[component="post/upvote"]',function(){return P.toggleVote($(this),".upvoted",1)}),n.on("click",'[component="post/downvote"]',function(){return P.toggleVote($(this),".downvoted",-1)}),n.on("click",'[component="post/vote-count"]',function(){P.showVotes(R($(this),"data-pid"))}),n.on("click",'[component="post/flag"]',function(){const o=R($(this),"data-pid");a.e(41803).then(function(){var s=[a(41803)];(function(r){r.showFlagModal({type:"post",id:o})}).apply(null,s)}).catch(a.oe)}),n.on("click",'[component="post/flagUser"]',function(){const o=R($(this),"data-uid");a.e(41803).then(function(){var s=[a(41803)];(function(r){r.showFlagModal({type:"user",id:o})}).apply(null,s)}).catch(a.oe)}),n.on("click",'[component="post/flagResolve"]',function(){const o=$(this).attr("data-flagId");a.e(41803).then(function(){var s=[a(41803)];(function(r){r.resolve(o)}).apply(null,s)}).catch(a.oe)}),n.on("click",'[component="post/edit"]',function(){const o=$(this),s=parseInt(R(o,"data-timestamp"),10),r=parseInt(ajaxify.data.postEditDuration,10);i(r,s,"post-edit-duration-expired")&&A.fire("action:composer.post.edit",{pid:R(o,"data-pid")})}),config.enablePostHistory&&ajaxify.data.privileges["posts:history"]&&n.on("click",'[component="post/view-history"], [component="post/edit-indicator"]',function(){const o=$(this);a.e(34654).then(function(){var s=[a(34654)];(function(r){r.open(R(o,"data-pid"))}).apply(null,s)}).catch(a.oe)}),n.on("click",'[component="post/delete"]',function(){const o=$(this),s=parseInt(R(o,"data-timestamp"),10),r=parseInt(ajaxify.data.postDeleteDuration,10);i(r,s,"post-delete-duration-expired")&&j($(this))});function i(o,s,r){if(!ajaxify.data.privileges.isAdminOrMod&&o&&Date.now()-s>o*1e3){const I=Math.floor(o/86400),m=Math.floor(o%86400/3600),M=Math.floor(o%86400%3600/60),k=o%86400%3600%60;let N="[[error:"+r+", "+o+"]]";return I?m?N="[[error:"+r+"-days-hours, "+I+", "+m+"]]":N="[[error:"+r+"-days, "+I+"]]":m?M?N="[[error:"+r+"-hours-minutes, "+m+", "+M+"]]":N="[[error:"+r+"-hours, "+m+"]]":M&&(k?N="[[error:"+r+"-minutes-seconds, "+M+", "+k+"]]":N="[[error:"+r+"-minutes, "+M+"]]"),w.error(N),!1}return!0}n.on("click",'[component="post/restore"]',function(){j($(this))}),n.on("click",'[component="post/purge"]',function(){F($(this))}),n.on("click",'[component="post/move"]',function(){const o=$(this);a.e(53094).then(function(){var s=[a(53094)];(function(r){r.init(o.parents("[data-pid]"))}).apply(null,s)}).catch(a.oe)}),n.on("click",'[component="post/change-owner"]',function(){const o=$(this);a.e(6111).then(function(){var s=[a(6111)];(function(r){r.init(o.parents("[data-pid]"))}).apply(null,s)}).catch(a.oe)}),n.on("click",'[component="post/ban-ip"]',function(){const o=$(this).attr("data-ip");socket.emit("blacklist.addRule",o,function(s){if(s)return w.error(s);w.success("[[admin/manage/blacklist:ban-ip]]")})}),n.on("click",'[component="post/chat"]',function(){Q($(this))})}async function E(e,n){const i=await x();H(async function(){let o=await U(e);(R(e,"data-uid")==="0"||!R(e,"data-userslug"))&&(o="");const s=e.is('[component="post/reply"]')?R(e,"data-pid"):null,r=!s||!i.pid||s===i.pid;i.text&&r?(o=o||i.username,A.fire("action:composer.addQuote",{tid:n,pid:s,title:ajaxify.data.titleRaw,username:o,body:i.text,selectedPid:i.pid})):A.fire("action:composer.post.new",{tid:n,pid:s,title:ajaxify.data.titleRaw,body:o?o+" ":$('[component="topic/quickreply/text"]').val()||""})})}async function g(e,n){const i=await x();H(async function(){const o=await U(e),s=R(e,"data-pid");function r(m){A.fire("action:composer.addQuote",{tid:n,pid:s,username:o,title:ajaxify.data.titleRaw,text:m})}if(i.text&&s&&s===i.pid)return r(i.text);const{content:I}=await b.get(`/posts/${s}/raw`);r(I)})}async function x(){let e="",n,i="";const o=window.getSelection?window.getSelection():document.selection.createRange(),s=$('[component="post"] [component="post/content"]');let r;return s.each(function(I,m){o&&o.containsNode&&m&&o.containsNode(m,!0)&&(r=m)}),r&&o&&(e=o.toString(),n=$(r).parents('[component="post"]').attr("data-pid"),i=await U($(r))),{text:e,pid:n,username:i}}function C(e,n){const i=e.attr("data-bookmarked")==="false"?"put":"del";return b[i](`/posts/${n}/bookmark`,void 0,function(o){if(o)return w.error(o);const s=i==="put"?"bookmark":"unbookmark";A.fire(`action:post.${s}`,{pid:n})}),!1}function R(e,n){return e.parents("[data-pid]").attr(n)}function U(e){return new Promise(n=>{let i="";if(e.attr("component")==="topic/reply"){n(i);return}const o=e.parents("[data-pid]");if(o.length){Promise.all([a.e(20648),a.e(10999)]).then(function(){var s=[a(22568)];(function(r){i=r(o.attr("data-username"),!0),i||(o.attr("data-uid")!=="0"?i="[[global:former-user]]":i="[[global:guest]]"),i&&i!=="[[global:former-user]]"&&i!=="[[global:guest]]"&&(i="@"+i),n(i)}).apply(null,s)}).catch(a.oe);return}n(i)})}function j(e){const n=R(e,"data-pid"),o=u.get("post","pid",n).hasClass("deleted")?"restore":"delete";L(o,n)}function F(e){L("purge",R(e,"data-pid"))}async function L(e,n){({action:e}=await A.fire(`static:post.${e}`,{action:e,pid:n})),e&&T.confirm("[[topic:post-"+e+"-confirm]]",function(i){if(!i)return;const o=e==="purge"?"":"/state";b[e==="restore"?"put":"del"](`/posts/${n}${o}`).catch(w.error)})}function Q(e){const n=e.parents("[data-pid]");return a.e(93216).then(function(){var i=[a(93216)];(function(o){o.newChat(n.attr("data-uid"))}).apply(null,i)}).catch(a.oe),e.parents(".btn-group").find(".dropdown-toggle").click(),!1}function H(e){if(!parseInt(ajaxify.data.topicStaleDays,10))return e();const i=Math.min(Date.now()-1e3*60*60*24*ajaxify.data.topicStaleDays,864e13);if(l||ajaxify.data.lastposttime>=i)return e();T.dialog({title:"[[topic:stale.title]]",message:"[[topic:stale.warning]]",buttons:{reply:{label:"[[topic:stale.reply-anyway]]",className:"btn-link",callback:function(){l=!0,e()}},create:{label:"[[topic:stale.create]]",className:"btn-primary",callback:function(){y.translate(`[[topic:link-back, ${ajaxify.data.title}, ${config.relative_path}/topic/${ajaxify.data.slug}]]`,function(s){A.fire("action:composer.topic.new",{cid:ajaxify.data.cid,body:s,fromStaleTopic:!0})})}}}}).modal()}const K=utils.debounce(V,250);function Y(){ajaxify.data.privileges["topics:reply"]&&(A.onPage("action:posts.loaded",t),$(document).off("selectionchange"),$(document).on("selectionchange",function(){window.getSelection().toString()===""&&$('[component="selection/tooltip"]').addClass("hidden")}),$(document).on("selectionchange",K))}function V(){window.getSelection().toString()===""||t()}async function t(){let e=$('[component="selection/tooltip"]');if(e.addClass("hidden"),e.attr("data-ajaxify")==="1"){e.remove();return}const n=window.getSelection();if(n.focusNode&&n.type==="Range"&&ajaxify.data.template.topic){const i=$(n.focusNode),o=$(n.anchorNode),s=o.parents("[data-pid]").attr("data-pid"),r=i.parents("[data-pid]").attr("data-pid");if(s!==r||!i.parents('[component="post/content"]').length||!o.parents('[component="post/content"]').length)return;const I=i.parents("[data-pid]"),m=n.getRangeAt(0);if(!I.length||m.collapsed)return;const M=m.getClientRects(),k=M[M.length-1];e.length||(e=await app.parseAndTranslate("partials/topic/selection-tooltip",ajaxify.data),$('[component="selection/tooltip"]').remove(),e.addClass("hidden").appendTo("body")),e.off("click").on("click",'[component="selection/tooltip/quote"]',function(){e.addClass("hidden"),g(I.find('[component="post/quote"]'),ajaxify.data.tid)}),e.removeClass("hidden"),$(window).one("action:ajaxify.start",function(){e.attr("data-ajaxify",1).addClass("hidden"),$(document).off("selectionchange",K)});const N=e.outerWidth(!0);e.css({top:k.bottom+$(window).scrollTop(),left:N>k.width?k.left:k.left+k.width-N})}}return D}.apply(S,h),p!==void 0&&(W.exports=p)},13578:(W,S,a)=>{var h,p;h=[a(7237),a(32230),a(74344),a(85233),a(63281),a(7927),a(73138)],p=function(f,v,u,y,P,b,T){const w={};let A={};w.addVoteHandler=function(){A={},f.get("topic").on("mouseenter",'[data-pid] [component="post/vote-count"]',D),f.get("topic").on("mouseleave",'[data-pid] [component="post/vote-count"]',B)};function B(){const d=$(this),c=d.parents("[data-pid]").attr("data-pid"),E=T.Tooltip.getInstance(this);E&&(E.dispose(),d.attr("title","")),A[c]=!1}function D(){const d=$(this),E=d.parent().parents("[data-pid]").attr("data-pid");A[E]=!0;const g=T.Tooltip.getInstance(this);g&&(g.dispose(),d.attr("title","")),socket.emit("posts.getUpvoters",[E],function(x,C){if(x)return b.error(x);A[E]&&C.length&&l(d,C[0])})}function l(d,c){function E(x){d.attr("title",x),new T.Tooltip(d,{container:"#content",html:!0}).show()}let g=c.usernames.filter(x=>x!=="[[global:former-user]]");g.length&&(g.length+c.otherCount>c.cutoff?(g=g.join(", ").replace(/,/g,"|"),v.translate("[[topic:users-and-others, "+g+", "+c.otherCount+"]]",function(x){x=x.replace(/\|/g,","),E(x)})):(g=g.join(", "),E(g)))}return w.toggleVote=function(d,c,E){const g=d.closest("[data-pid]"),C=g.find(c).length?"del":"put",R=g.attr("data-pid");return u[C](`/posts/${R}/vote`,{delta:E},function(U){if(U){if(!app.user.uid){ajaxify.go("login");return}return b.error(U)}y.fire("action:post.toggleVote",{pid:R,delta:E,unvote:C==="del"})}),!1},w.showVotes=function(d){socket.emit("posts.getVoters",{pid:d,cid:ajaxify.data.cid},function(c,E){if(c)return c.message==="[[error:no-privileges]]"?void 0:b.error(c);app.parseAndTranslate("modals/votes",E,function(g){const x=P.dialog({title:"[[global:voters]]",message:g,className:"vote-modal",show:!0,onEscape:!0,backdrop:!0});x.on("click",function(){x.modal("hide")})})})},w}.apply(S,h),p!==void 0&&(W.exports=p)},74344:(W,S,a)=>{a.r(S),a.d(S,{del:()=>D,get:()=>b,head:()=>T,patch:()=>A,post:()=>w,put:()=>B});var h=a(85233),p=a.n(h),f=a(63281),v=a.n(f);const u=config.relative_path+"/api/v3";async function y(l,d){if(l.url=l.url.startsWith("/api")?config.relative_path+l.url:u+l.url,typeof d=="function"){P(l).then(c=>d(null,c),c=>d(c));return}try{return await P(l)}catch(c){if(c.message==="A valid login session was not found. Please log in and try again.")return(0,f.confirm)("[[error:api.reauth-required]]",E=>{E&&ajaxify.go("login")});throw c}}async function P(l){const{url:d}=l;delete l.url,l.data&&!(l.data instanceof FormData)&&(l.data=JSON.stringify(l.data||{}),l.headers["content-type"]="application/json; charset=utf-8"),{options:l}=await(0,h.fire)("filter:api.options",{options:l}),l.data&&(l.body=l.data,delete l.data);const c=await fetch(d,l),{headers:E}=c,g=E.get("content-type"),x=g&&g.startsWith("application/json");let C;if(l.method!=="head"&&(x?C=await c.json():C=await c.text()),!c.ok)throw C?new Error(x?C.status.message:C):new Error(c.statusText);return x&&C&&C.hasOwnProperty("status")&&C.hasOwnProperty("response")?C.response:C}function b(l,d,c){return y({url:l+(d&&Object.keys(d).length?"?"+$.param(d):"")},c)}function T(l,d,c){return y({url:l+(d&&Object.keys(d).length?"?"+$.param(d):""),method:"head"},c)}function w(l,d,c){return y({url:l,method:"post",data:d,headers:{"x-csrf-token":config.csrf_token}},c)}function A(l,d,c){return y({url:l,method:"patch",data:d,headers:{"x-csrf-token":config.csrf_token}},c)}function B(l,d,c){return y({url:l,method:"put",data:d,headers:{"x-csrf-token":config.csrf_token}},c)}function D(l,d,c){return y({url:l,method:"delete",data:d,headers:{"x-csrf-token":config.csrf_token}},c)}},11120:W=>{W.exports=function(S,a,h){a.setGlobal("true",!0),a.setGlobal("false",!1);const p=24*60*60*1e3,f={displayMenuItem:u,buildMetaTag:y,buildLinkTag:P,stringify:b,escape:T,stripTags:w,buildCategoryIcon:A,buildCategoryLabel:B,generateCategoryBackground:D,generateChildrenCategories:l,generateTopicClass:d,membershipBtn:c,spawnPrivilegeStates:E,localeToHTML:g,renderTopicImage:x,renderDigestAvatar:C,userAgentIcons:R,buildAvatar:U,increment:j,generateRepliedTo:F,generateWrote:L,isoTimeToLocaleString:Q,shouldHideReplyContainer:H,humanReadableNumber:K,formattedNumber:Y,register:V,__escape:v};function v(t){return t}function u(t,e){const n=t.navigation[e];return!(!n||n.route.match("/users")&&t.user&&!t.user.privileges["view:users"]||n.route.match("/tags")&&t.user&&!t.user.privileges["view:tags"]||n.route.match("/groups")&&t.user&&!t.user.privileges["view:groups"])}function y(t){const e=t.name?'name="'+t.name+'" ':"",n=t.property?'property="'+t.property+'" ':"",i=t.content?'content="'+t.content.replace(/\n/g," ")+'" ':"";return"<meta "+e+n+i+`/>
	`}function P(t){const e=["link","rel","as","type","href","sizes","title","crossorigin"],[n,i,o,s,r,I,m,M]=e.map(k=>t[k]?`${k}="${t[k]}" `:"");return"<link "+n+i+o+s+I+m+r+M+`/>
	`}function b(t){return JSON.stringify(t).replace(/&/gm,"&amp;").replace(/</gm,"&lt;").replace(/>/gm,"&gt;").replace(/"/g,"&quot;")}function T(t){return S.escapeHTML(t)}function w(t){return S.stripHTMLTags(t)}function A(t,e,n){return t?`<span class="icon d-inline-flex justify-content-center align-items-center align-middle ${n}" style="${D(t)} width:${e}; height: ${e}; font-size: ${parseInt(e,10)/2}px;">${t.icon?`<i class="fa fa-fw ${t.icon}"></i>`:""}</span>`:""}function B(t,e="a",n=""){if(!t)return"";const i=e==="a"?`href="${h}/category/${t.slug}"`:"";return`<${e} ${i} class="badge px-1 text-truncate text-decoration-none ${n}" style="color: ${t.color};background-color: ${t.bgColor};border-color: ${t.bgColor}!important; max-width: 70vw;">
			${t.icon&&t.icon!=="fa-nbb-none"?`<i class="fa fa-fw ${t.icon}"></i>`:""}
			${t.name}
		</${e}>`}function D(t){if(!t)return"";const e=[];return t.bgColor&&(e.push("background-color: "+t.bgColor),e.push(`border-color: ${t.bgColor}!important`)),t.color&&e.push("color: "+t.color),t.backgroundImage&&(e.push("background-image: url("+t.backgroundImage+")"),t.imageClass&&e.push("background-size: "+t.imageClass)),e.join("; ")+";"}function l(t){let e="";return!t||!t.children||!t.children.length||(t.children.forEach(function(n){if(n&&!n.isSection){const i=n.link?n.link:h+"/category/"+n.slug;e+='<span class="category-children-item float-start"><div role="presentation" class="icon float-start" style="'+D(n)+'"><i class="fa fa-fw '+n.icon+'"></i></div><a href="'+i+'"><small>'+n.name+"</small></a></span>"}}),e=e&&'<span class="category-children">'+e+"</span>"),e}function d(t){return["locked","pinned","deleted","unread","scheduled"].filter(n=>!!t[n]).join(" ")}function c(t,e=""){return t.isMember&&t.name!=="administrators"?`<button class="btn btn-danger ${e}" data-action="leave" data-group="${t.displayName}" ${t.disableLeave?" disabled":""}><i class="fa fa-times"></i> [[groups:membership.leave-group]]</button>`:t.isPending&&t.name!=="administrators"?`<button class="btn btn-warning disabled ${e}"><i class="fa fa-clock-o"></i> [[groups:membership.invitation-pending]]</button>`:t.isInvited?`<button class="btn btn-link" data-action="rejectInvite" data-group="${t.displayName}">[[groups:membership.reject]]</button><button class="btn btn-success" data-action="acceptInvite" data-group="${t.name}"><i class="fa fa-plus"></i> [[groups:membership.accept-invitation]]</button>`:!t.disableJoinRequests&&t.name!=="administrators"?`<button class="btn btn-success" data-action="join" data-group="${t.displayName}"><i class="fa fa-plus"></i> [[groups:membership.join-group]]</button>`:""}function E(t,e,n){const i=[];for(const o in e)e.hasOwnProperty(o)&&i.push({name:o,state:e[o],type:n[o]});return i.map(function(o){const s=["groups:moderate","groups:posts:upvote","groups:posts:downvote","groups:local:login","groups:group:create"],r=["groups:find","groups:read","groups:topics:read","groups:view:users","groups:view:tags","groups:view:groups"],I=["groups:moderate"],m=t==="guests"&&(s.includes(o.name)||o.name.startsWith("groups:admin:"))||t==="spiders"&&!r.includes(o.name)||t==="Global Moderators"&&I.includes(o.name);return`
				<td data-privilege="${o.name}" data-value="${o.state}" data-type="${o.type}">
					<div class="form-check text-center">
						<input class="form-check-input float-none" autocomplete="off" type="checkbox"${o.state?" checked":""}${m?' disabled="disabled"':""} />
					</div>
				</td>
			`}).join("")}function g(t,e){return t=t||e||"en-GB",t.replace("_","-")}function x(t){return t.thumb?'<img src="'+t.thumb+'" class="img-circle user-img" title="'+t.user.username+'" />':'<img component="user/picture" data-uid="'+t.user.uid+'" src="'+t.user.picture+'" class="user-img" title="'+t.user.username+'" />'}function C(t){return t.teaser?t.teaser.user.picture?'<img style="vertical-align: middle; width: 32px; height: 32px; border-radius: 50%;" src="'+t.teaser.user.picture+'" title="'+t.teaser.user.username+'" />':'<div style="vertical-align: middle; width: 32px; height: 32px; line-height: 32px; font-size: 16px; background-color: '+t.teaser.user["icon:bgColor"]+'; color: white; text-align: center; display: inline-block; border-radius: 50%;">'+t.teaser.user["icon:text"]+"</div>":t.user.picture?'<img style="vertical-align: middle; width: 32px; height: 32px; border-radius: 50%;" src="'+t.user.picture+'" title="'+t.user.username+'" />':'<div style="vertical-align: middle; width: 32px; height: 32px; line-height: 32px; font-size: 16px; background-color: '+t.user["icon:bgColor"]+'; color: white; text-align: center; display: inline-block; border-radius: 50%;">'+t.user["icon:text"]+"</div>"}function R(t){let e="";switch(t.platform){case"Linux":e+='<i class="fa fa-fw fa-linux"></i>';break;case"Microsoft Windows":e+='<i class="fa fa-fw fa-windows"></i>';break;case"Apple Mac":e+='<i class="fa fa-fw fa-apple"></i>';break;case"Android":e+='<i class="fa fa-fw fa-android"></i>';break;case"iPad":e+='<i class="fa fa-fw fa-tablet"></i>';break;case"iPod":case"iPhone":e+='<i class="fa fa-fw fa-mobile"></i>';break;default:e+='<i class="fa fa-fw fa-question-circle"></i>';break}switch(t.browser){case"Chrome":e+='<i class="fa fa-fw fa-chrome"></i>';break;case"Firefox":e+='<i class="fa fa-fw fa-firefox"></i>';break;case"Safari":e+='<i class="fa fa-fw fa-safari"></i>';break;case"IE":e+='<i class="fa fa-fw fa-internet-explorer"></i>';break;case"Edge":e+='<i class="fa fa-fw fa-edge"></i>';break;default:e+='<i class="fa fa-fw fa-question-circle"></i>';break}return e}function U(t,e,n,i,o){t||(t=this);const s=new Map([["alt",t.username],["title",t.username],["data-uid",t.uid],["loading","lazy"]]),r=[`--avatar-size: ${e};`],I=M=>Array.from(M).reduce((k,[N,z])=>(k+=` ${N}="${z}"`,k),"");i=i||"",s.set("class",`avatar ${i}${n?" avatar-rounded":""}`);let m="";return t.picture&&(s.set("component",o||"avatar/picture"),m+="<img "+I(s)+' src="'+t.picture+'" style="'+r.join(" ")+'" onError="this.remove();" itemprop="image" />'),s.set("component",o||"avatar/icon"),r.push("background-color: "+t["icon:bgColor"]+";"),m+="<span "+I(s)+' style="'+r.join(" ")+'">'+t["icon:text"]+"</span>",m}function j(t,e){return String(t+parseInt(e,10))}function F(t,e){const n=t.parent&&t.parent.displayname?t.parent.displayname:"[[global:guest]]";return`[[topic:replied-to-user-${t.timestamp<Date.now()-e*p?"on":"ago"}, ${t.toPid}, ${h}/post/${t.toPid}, ${n}, ${h}/post/${t.pid}, ${t.timestampISO}]]`}function L(t,e){return`[[topic:wrote-${t.timestamp<Date.now()-e*p?"on":"ago"}, ${h}/post/${t.pid}, ${t.timestampISO}]]`}function Q(t){return new Date(t).toLocaleString().replace(/,/g,"&#44;")}function H(t){return!!(t.replies.count<=0||t.replies.hasSingleImmediateReply)}function K(t,e=1){return S.makeNumberHumanReadable(t,e)}function Y(t){return S.addCommas(t)}function V(){Object.keys(f).forEach(function(t){a.registerHelper(t,f[t])})}return f}},59265:(W,S,a)=>{var h,p;const f=a(11120);h=[a(96795),a(59006)],p=function(v,u){return f(v,u,config.relative_path)}.apply(S,h),p!==void 0&&(W.exports=p)},78942:(W,S,a)=>{var h,p;h=[a(85233)],p=function(f){const v={};v.addShareHandlers=function(P){const b=window.location.protocol+"//"+window.location.host;function T(w,A,B,D){return window.open(w+encodeURIComponent(b+config.relative_path+A),"_blank","width="+B+",height="+D+",scrollbars=no,status=no"),f.fire("action:share.open",{url:w,urlToPost:A}),!1}$("#content").off("shown.bs.dropdown",".share-dropdown").on("shown.bs.dropdown",".share-dropdown",function(){const w=$(this).find(".post-link");w.val(b+y($(this))),setTimeout(function(){w.putCursorAtEnd().select()},50)}),u(".post-link",function(w){return w.preventDefault(),!1}),u('[component="share/twitter"]',function(){return T("https://twitter.com/intent/tweet?text="+encodeURIComponent(P)+"&url=",y($(this)),550,420)}),u('[component="share/facebook"]',function(){return T("https://www.facebook.com/sharer/sharer.php?u=",y($(this)),626,436)}),f.fire("action:share.addHandlers",{openShare:T})};function u(P,b){$("#content").off("click",P).on("click",P,b)}function y(P){const b=parseInt(P.parents("[data-pid]").attr("data-pid"),10);return"/post"+(b?"/"+b:"")}return v}.apply(S,h),p!==void 0&&(W.exports=p)},66603:(W,S,a)=>{var h;h=function(){function p(){this._store={},this._keys=[]}p.prototype.isMock=!0,p.prototype.setItem=function(u,y){u=String(u),this._keys.indexOf(u)===-1&&this._keys.push(u),this._store[u]=y},p.prototype.getItem=function(u){return u=String(u),this._keys.indexOf(u)===-1?null:this._store[u]},p.prototype.removeItem=function(u){u=String(u),this._keys=this._keys.filter(function(y){return y!==u}),this._store[u]=null},p.prototype.clear=function(){this._keys=[],this._store={}},p.prototype.key=function(u){return u=parseInt(u,10)||0,this._keys[u]},Object.defineProperty&&Object.defineProperty(p.prototype,"length",{get:function(){return this._keys.length}});let f;const v=Date.now().toString();try{if(f=window.localStorage,f.setItem(v,v),f.getItem(v)!==v)throw Error("localStorage behaved unexpectedly");return f.removeItem(v),f}catch(u){console.warn(u),console.warn("localStorage failed, falling back on sessionStorage");try{if(f=window.sessionStorage,f.setItem(v,v),f.getItem(v)!==v)throw Error("sessionStorage behaved unexpectedly");return f.removeItem(v),f}catch(y){return console.warn(y),console.warn("sessionStorage failed, falling back on memory storage"),new p}}}.call(S,a,S,W),h!==void 0&&(W.exports=h)}}]);

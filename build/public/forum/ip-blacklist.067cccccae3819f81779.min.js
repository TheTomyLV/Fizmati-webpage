"use strict";(self.webpackChunknodebb=self.webpackChunknodebb||[]).push([[58718],{91783:(k,c,l)=>{l.r(c),l.d(c,{init:()=>p,setupAnalytics:()=>b});var t=l(69449),d=l(59006),g=l.n(d),u=l(63281),C=l.n(u),n=l(7927);t.kL.register(t.ST,t.uw,t.f$,t.jn,t.od,t.u,t.Gu);function p(){const o=$("#blacklist-rules");o.on("keyup",function(){$("#blacklist-rules-holder").val(o.val())}),$('[data-action="apply"]').on("click",function(){socket.emit("blacklist.save",o.val(),function(a){if(a)return n.error(a);n.alert({type:"success",alert_id:"blacklist-saved",title:"[[ip-blacklist:alerts.applied-success]]"})})}),$('[data-action="test"]').on("click",function(){socket.emit("blacklist.validate",{rules:o.val()},function(a,s){if(a)return n.error(a);d.render("admin/partials/blacklist-validate",s).then(function(e){u.alert(e)})})}),b()}function b(){const o=document.getElementById("blacklist:hourly"),a=document.getElementById("blacklist:daily"),s=utils.getHoursArray().map(function(i,r){return r%3?"":i}),e=utils.getDaysArray().slice(-7).map(function(i,r){return r%3?"":i});utils.isMobile()&&(t.kL.defaults.plugins.tooltip.enabled=!1);const f={"blacklist:hourly":{labels:s,datasets:[{label:"",fill:"origin",tension:.25,backgroundColor:"rgba(186,139,175,0.2)",borderColor:"rgba(186,139,175,1)",pointBackgroundColor:"rgba(186,139,175,1)",pointHoverBackgroundColor:"#fff",pointBorderColor:"#fff",pointHoverBorderColor:"rgba(186,139,175,1)",data:ajaxify.data.analytics.hourly}]},"blacklist:daily":{labels:e,datasets:[{label:"",fill:"origin",tension:.25,backgroundColor:"rgba(151,187,205,0.2)",borderColor:"rgba(151,187,205,1)",pointBackgroundColor:"rgba(151,187,205,1)",pointHoverBackgroundColor:"#fff",pointBorderColor:"#fff",pointHoverBorderColor:"rgba(151,187,205,1)",data:ajaxify.data.analytics.daily}]}},y={responsive:!0,scales:{y:{position:"left",type:"linear",beginAtZero:!0}}};new t.kL(o.getContext("2d"),{type:"line",data:f["blacklist:hourly"],options:y}),new t.kL(a.getContext("2d"),{type:"line",data:f["blacklist:daily"],options:y})}}}]);

"use strict";(self.webpackChunknodebb=self.webpackChunknodebb||[]).push([[9126],{85803:(g,m,c)=>{var f,l;f=[c(85233),c(32230),c(86569)],l=function(d,h){const s={_capsState:!1};return s.init=function(){const e=$("#login-error-notify"),a=$("#login"),r=$("#login-form");a.on("click",async function(t){t.preventDefault();const p=$("#username").val(),u=$("#password").val();if(!p||!u)e.find("p").translateText("[[error:invalid-username-or-password]]"),e.show();else{if(e.hide(),a.hasClass("disabled"))return;a.addClass("disabled");try{if((await d.fire("filter:app.login",{username:p,password:u,cancel:!1})).cancel){a.removeClass("disabled");return}}catch(n){e.find("p").translateText(n.message),e.show(),a.removeClass("disabled");return}d.fire("action:app.login"),r.ajaxSubmit({headers:{"x-csrf-token":config.csrf_token},beforeSend:function(){app.flags._login=!0},success:function(n){d.fire("action:app.loggedIn",n);const i=utils.urlToLocation(n.next).pathname,o=utils.params({url:n.next});o.loggedin=!0,delete o.register;const b=decodeURIComponent($.param(o));window.location.href=i+"?"+b},error:function(n){let i=n.responseText;const o=n.responseJSON;n.status===403&&n.responseText==="Forbidden"?window.location.href=config.relative_path+"/login?error=csrf-invalid":o&&o.hasOwnProperty("banned_until")&&(i=o.banned_until?h.compile("error:user-banned-reason-until",new Date(o.banned_until).toLocaleString(),o.reason):"[[error:user-banned-reason, "+o.reason+"]]"),e.find("p").translateText(i),e.show(),a.removeClass("disabled"),$("#password:focus").length&&$("#password").select()}})}}),s.capsLockCheck(document.querySelector("#password"),document.querySelector("#caps-lock-warning")),$("#login-error-notify button").on("click",function(t){return t.preventDefault(),e.hide(),!1}),$("#content #username").val()?$("#content #password").val("").focus():$("#content #username").focus(),$("#content #noscript").val("false")},s.capsLockCheck=(e,a)=>{const r=t=>{a.classList[t?"remove":"add"]("hidden"),a.parentNode.classList[t?"add":"remove"]("has-warning")};e&&(e.addEventListener("keyup",function(t){if(s._capsState&&t.key==="CapsLock"){r(!1),s._capsState=!s._capsState;return}s._capsState=t.getModifierState&&t.getModifierState("CapsLock"),r(s._capsState)}),s._capsState&&r(!0))},s}.apply(m,f),l!==void 0&&(g.exports=l)}}]);

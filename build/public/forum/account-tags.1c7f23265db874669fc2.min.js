"use strict";(self.webpackChunknodebb=self.webpackChunknodebb||[]).push([[46984,86193],{30742:(p,y,f)=>{var d,l;d=[f(59494),f(7927),f(74344),f(85233),f(86193)],l=function(h,s,i,m,E){const a={};return a.init=function(){h.init();const t=$('[component="tags/watch"]');t.tagsinput({tagClass:"badge bg-info",confirmKeys:[13,44],trimValue:!0});const e=t.siblings(".bootstrap-tagsinput").find("input");E.tag(e),ajaxify.data.tags.forEach(function(o){t.tagsinput("add",o)}),t.on("itemAdded",function(o){e.length&&e.autocomplete("close"),i.put(`/tags/${o.item}/follow`,{}).then(()=>{s.alert({alert_id:"follow_tag",message:"[[tags:following-tag.message]]",type:"success",timeout:5e3}),m.fire("action:tags.changeWatching",{tag:ajaxify.data.tag,type:"follow"})}).catch(n=>s.error(n))}),t.on("itemRemoved",function(o){i.del(`/tags/${o.item}/follow`,{}).then(()=>{s.alert({alert_id:"follow_tag",message:"[[tags:not-following-tag.message]]",type:"info",timeout:5e3}),m.fire("action:tags.changeWatching",{tag:ajaxify.data.tag,type:"unfollow"})}).catch(n=>s.error(n))})},a}.apply(y,d),l!==void 0&&(p.exports=l)},86193:(p,y,f)=>{var d,l;d=[f(74344),f(7927)],l=function(h,s){const i={},m={delay:200,appendTo:null};i.init=a=>{const t={...m,...a},{input:e,onSelect:o}=t;app.loadJQueryUI(function(){e.autocomplete({...t,open:function(){$(this).autocomplete("widget").css("z-index",100005)},select:function(n,c){E(e,o,n,c)}})})},i.user=function(a,t,e){typeof t=="function"&&(e=t,t={}),t=t||{},i.init({input:a,onSelect:e,source:(o,n)=>{t.query=o.term,h.get("/api/users",t,function(c,r){if(c)return s.error(c);if(r&&r.users){const g=r.users.map(function(u){const x=$("<div></div>").html(u.username).text();return u&&{label:x,value:x,user:{uid:u.uid,name:u.username,slug:u.userslug,username:u.username,userslug:u.userslug,picture:u.picture,banned:u.banned,"icon:text":u["icon:text"],"icon:bgColor":u["icon:bgColor"]}}});n(g)}$(".ui-autocomplete a").attr("data-ajaxify","false")})}})},i.group=function(a,t){i.init({input:a,onSelect:t,source:(e,o)=>{socket.emit("groups.search",{query:e.term},function(n,c){if(n)return s.error(n);if(c&&c.length){const r=c.map(function(g){return g&&{label:g.name,value:g.name,group:g}});o(r)}$(".ui-autocomplete a").attr("data-ajaxify","false")})}})},i.tag=function(a,t){i.init({input:a,onSelect:t,delay:100,source:(e,o)=>{socket.emit("topics.autocompleteTags",{query:e.term,cid:ajaxify.data.cid||0},function(n,c){if(n)return s.error(n);c&&o(c),$(".ui-autocomplete a").attr("data-ajaxify","false")})}})};function E(a,t,e,o){t=t||function(){};const n=jQuery.Event("keypress");n.which=13,n.keyCode=13,setTimeout(function(){a.trigger(n)},100),t(e,o)}return i}.apply(y,d),l!==void 0&&(p.exports=l)}}]);

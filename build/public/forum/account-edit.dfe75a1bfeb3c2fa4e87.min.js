"use strict";(self.webpackChunknodebb=self.webpackChunknodebb||[]).push([[23692],{55299:(m,p,a)=>{var u,o;u=[a(74344),a(63281),a(7927)],o=function(g,h,l){const r={};return r.init=function(c){const s=h.dialog({message:`
				<label class="form-label">[[admin/manage/users:new-email]]</label>
				<input id="newEmail" class="form-control" type="text" value="${utils.escapeHTML(c.email||"")}">
			`,title:"[[admin/manage/users:change-email]]",onEscape:!0,buttons:{cancel:{label:"[[admin/manage/users:alerts.button-cancel]]",className:"btn-link"},change:{label:"[[admin/manage/users:alerts.button-change]]",className:"btn-primary",callback:function(){const i=s.find("#newEmail").val();return g.post("/users/"+c.uid+"/emails",{skipConfirmation:!0,email:i}).then(()=>{s.modal("hide"),c.onSuccess(i)}).catch(l.error),!1}}}})},r}.apply(p,u),o!==void 0&&(m.exports=o)},93318:(m,p,a)=>{var u,o;u=[a(59494),a(94039),a(32230),a(74344),a(85233),a(63281),a(7927),a(55299)],o=function(g,h,l,r,c,s,i,b){const y={};y.init=function(){g.init(),$("#submitBtn").on("click",x),ajaxify.data.groupTitleArray.length===1&&ajaxify.data.groupTitleArray[0]===""&&$('#groupTitle option[value=""]').attr("selected",!0),E(),C(),v(),j(),T(),!ajaxify.data.isSelf&&ajaxify.data.canEdit&&$(`a[href="${config.relative_path}/user/${ajaxify.data.userslug}/edit/email"]`).on("click",()=>(b.init({uid:ajaxify.data.uid,email:ajaxify.data.email,onSuccess:function(){i.success("[[user:email-updated]]")}}),!1))};function x(){const t=$('form[component="profile/edit/form"]').serializeObject();return t.uid=ajaxify.data.uid,t.groupTitle=t.groupTitle||"",t.groupTitle=JSON.stringify(Array.isArray(t.groupTitle)?t.groupTitle:[t.groupTitle]),c.fire("action:profile.update",t),r.put("/users/"+t.uid,t).then(n=>{i.success("[[user:profile-update-success]]"),n.picture&&$("#user-current-picture").attr("src",n.picture),h.updateHeader(n.picture)}).catch(i.error),!1}function E(){$("#deleteAccountBtn").on("click",function(){return l.translate("[[user:delete-account-confirm]]",function(t){const n=s.confirm(t+'<p><input type="password" class="form-control" id="confirm-password" /></p>',function(d){if(!d)return;const e=n.find(".btn-primary");return e.html('<i class="fa fa-spinner fa-spin"></i>'),e.prop("disabled",!0),r.del(`/users/${ajaxify.data.uid}/account`,{password:$("#confirm-password").val()},function(A){function L(){l.translate("[[modules:bootbox.confirm]]",function(M){e.text(M),e.prop("disabled",!1)})}if(A)return L(),i.error(A);e.html('<i class="fa fa-check"></i>'),window.location.href=`${config.relative_path}/`}),!1});n.on("shown.bs.modal",function(){n.find("input").focus()})}),!1})}function C(){$("#confirm-email").on("click",function(){const t=$(this).attr("disabled",!0);socket.emit("user.emailConfirm",{},function(n){if(t.removeAttr("disabled"),n)return i.error(n);i.success("[[notifications:email-confirm-sent]]")})})}function f(t,n){return t.length?"("+t.val().length+"/"+n+")":""}function v(){const t=$("#signature");$("#signatureCharCountLeft").html(f(t,ajaxify.data.maximumSignatureLength)),t.on("keyup change",function(){$("#signatureCharCountLeft").html(f(t,ajaxify.data.maximumSignatureLength))})}function j(){const t=$("#aboutme");$("#aboutMeCharCountLeft").html(f(t,ajaxify.data.maximumAboutMeLength)),t.on("keyup change",function(){$("#aboutMeCharCountLeft").html(f(t,ajaxify.data.maximumAboutMeLength))})}function T(){function t(n){const d=$("#groupTitle").val();if(!ajaxify.data.allowMultipleBadges||Array.isArray(d)&&d.length>1)return;const e=$("#groupTitle").find(":selected");e.length&&e.val()&&(n>0?e.insertAfter(e.next()):e.prev().val()&&e.insertBefore(e.prev()))}$('[component="group/order/up"]').on("click",function(){t(-1)}),$('[component="group/order/down"]').on("click",function(){t(1)})}return y}.apply(p,u),o!==void 0&&(m.exports=o)}}]);

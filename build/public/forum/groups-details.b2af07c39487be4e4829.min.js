(self.webpackChunknodebb=self.webpackChunknodebb||[]).push([[92545,70565,61762,83014,66623,49286,99617,88529,42550,10999],{22626:(D,A,u)=>{"use strict";var b,y;b=[u(24987),u(18487),u(7237),u(38565),u(98192),u(32230),u(74344),u(22568),u(50548),u(63281),u(7927)],y=function(v,s,p,o,i,e,c,r,f,g,d){const t={};let a;t.init=function(){const m=p.get("groups/container");a=ajaxify.data.group.name,ajaxify.data.group.isOwner&&(t.prepareSettings(),o.init(p.get("groups/cover"),function(h,l,E){socket.emit("groups.cover.update",{groupName:a,imageData:h,position:l},E)},function(){i.show({title:"[[groups:upload-group-cover]]",socketMethod:"groups.cover.update",aspectRatio:NaN,allowSkippingCrop:!0,restrictImageDimension:!1,paramName:"groupName",paramValue:a},function(h){h=(h.startsWith("http")?"":config.relative_path)+h+"?"+Date.now(),p.get("groups/cover").css("background-image","url("+h+")")})},C)),v.init(),n(),p.get("groups/activity").find(".content img:not(.not-responsive)").addClass("img-fluid"),m.on("click","[data-action]",function(){const h=$(this),l=h.parents("[data-uid]"),E=l.find('[component="groups/owner/icon"]'),x=!!parseInt(l.attr("data-isowner"),10),w=l.attr("data-uid"),P=h.attr("data-action");switch(P){case"toggleOwnership":c[x?"del":"put"](`/groups/${ajaxify.data.group.slug}/ownership/${w}`,{}).then(()=>{E.toggleClass("invisible")}).catch(d.error);break;case"kick":e.translate("[[groups:details.kick-confirm]]",function(k){g.confirm(k,function(R){R&&c.del(`/groups/${ajaxify.data.group.slug}/membership/${w}`,void 0).then(()=>l.slideUp().remove()).catch(d.error)})});break;case"update":t.update();break;case"delete":t.deleteGroup();break;case"join":c.put("/groups/"+ajaxify.data.group.slug+"/membership/"+(w||app.user.uid),void 0).then(()=>ajaxify.refresh()).catch(d.error);break;case"leave":c.del("/groups/"+ajaxify.data.group.slug+"/membership/"+(w||app.user.uid),void 0).then(()=>ajaxify.refresh()).catch(d.error);break;case"accept":c.put(`/groups/${ajaxify.data.group.slug}/pending/${w}`).then(()=>ajaxify.refresh()).catch(d.error);break;case"reject":c.del(`/groups/${ajaxify.data.group.slug}/pending/${w}`).then(()=>ajaxify.refresh()).catch(d.error);break;case"issueInvite":c.post(`/groups/${ajaxify.data.group.slug}/invites/${w}`).then(()=>ajaxify.refresh()).catch(d.error);break;case"acceptInvite":c.put(`/groups/${ajaxify.data.group.slug}/invites/${app.user.uid}`).then(()=>{w?l.remove():ajaxify.refresh()}).catch(d.error);break;case"rescindInvite":case"rejectInvite":c.del(`/groups/${ajaxify.data.group.slug}/invites/${w||app.user.uid}`).then(()=>{w?l.remove():ajaxify.refresh()}).catch(d.error);break;case"acceptAll":case"rejectAll":{const k=document.querySelector('[component="groups/pending"]');if(!k)return;const R=P==="acceptAll"?"put":"del";let j=Array.prototype.map.call(k.querySelectorAll("[data-uid]"),S=>parseInt(S.getAttribute("data-uid"),10));j=j.filter((S,I)=>j.indexOf(S)===I),Promise.all(j.map(async S=>c[R](`/groups/${ajaxify.data.group.slug}/pending/${S}`))).then(()=>{ajaxify.refresh()}).catch(d.error);break}}})},t.prepareSettings=function(){const m=p.get("groups/settings"),h=m.find('[name="labelColor"]'),l=m.find('[name="textColor"]'),E=m.find('[data-action="icon-select"]'),x=m.find(".badge"),w=m.find(".badge-text"),P=x.find("i"),k=m.find('[name="userTitle"]'),R=m.find('[name="userTitleEnabled"]'),j=m.find('[name="icon"]');h.on("input",function(){x.css("background-color",h.val())}),l.on("input",function(){x.css("color",l.val())}),E.on("click",function(){s.init(P,function(){j.val(P.val())})}),k.on("keyup",function(){w.translateText(k.val())}),R.on("change",function(){const I=p.get("groups/userTitleOption");this.checked?(I.removeAttr("disabled"),x.removeClass("hide")):(I.attr("disabled","disabled"),x.addClass("hide"))});const S=f.init($('.member-post-cids-selector [component="category-selector"]'),{onSelect:function(I){let T=($("#memberPostCids").val()||"").split(",").map(L=>parseInt(L,10));T.push(I.cid),T=T.filter((L,B,O)=>O.indexOf(L)===B),$("#memberPostCids").val(T.join(",")),S.selectCategory(0)}})},t.update=function(){const m=p.get("groups/settings"),h=m.find('input[type="checkbox"][name]');if(m.length){const l=m.serializeObject();Array.isArray(l.memberPostCids)||(l.memberPostCids=$("#memberPostCids").val()),h.each(function(E,x){x=$(x),x.length&&(l[x.attr("name")]=x.prop("checked"))}),c.put(`/groups/${ajaxify.data.group.slug}`,l).then(()=>{if(l.name!==ajaxify.data.group.name){let E=window.location.pathname;E=E.slice(1,E.lastIndexOf("/")+1),ajaxify.go(E+r(l.name))}d.success("[[groups:event.updated]]")}).catch(d.error)}},t.deleteGroup=function(){g.confirm("Are you sure you want to delete the group: "+utils.escapeHTML(a),function(m){m&&g.prompt("Please enter the name of this group in order to delete it:",function(h){h===a&&c.del(`/groups/${ajaxify.data.group.slug}`,{}).then(()=>{d.success("[[groups:event.deleted, "+utils.escapeHTML(a)+"]]"),ajaxify.go("groups")}).catch(d.error)})})};function n(){if(!ajaxify.data.group.isOwner)return;async function m(){const l=await c.get(`/api/groups/${ajaxify.data.group.slug}`),E=await app.parseAndTranslate("groups/details","group.invited",{group:l.group});$('[component="groups/invited"] tbody tr').remove(),$('[component="groups/invited"] tbody').html(E)}const h=$('[component="groups/members/invite"]');u.e(86193).then(function(){var l=[u(86193)];(function(E){E.user(h,function(x,w){c.post(`/groups/${ajaxify.data.group.slug}/invites/${w.item.user.uid}`).then(()=>m()).catch(d.error)})}).apply(null,l)}).catch(u.oe),$('[component="groups/members/bulk-invite-button"]').on("click",async()=>{let l=$('[component="groups/members/bulk-invite"]').val();if(!l)return!1;l=l.split(",").map(x=>r(x)),l=await Promise.all(l.map(x=>c.head(`/users/bySlug/${x}`).then(()=>x).catch(()=>!1))),l=l.filter(Boolean);const E=await Promise.all(l.map(x=>c.get(`/users/bySlug/${x}`).then(({uid:w})=>w)));await Promise.all(E.map(async x=>c.post(`/groups/${ajaxify.data.group.slug}/invites/${x}`))).then(()=>{m()}).catch(d.error)})}function C(){e.translate("[[groups:remove-group-cover-confirm]]",function(m){g.confirm(m,function(h){h&&socket.emit("groups.cover.remove",{groupName:ajaxify.data.group.name},function(l){l?d.error(l):ajaxify.refresh()})})})}return t}.apply(A,b),y!==void 0&&(D.exports=y)},24987:(D,A,u)=>{"use strict";var b,y;b=[u(74344),u(63281),u(7927)],y=function(v,s,p){const o={};let i,e;o.init=function(n){e=n||"groups/details",i=ajaxify.data.group.name,c(),f(),g()};function c(){$('[component="groups/members/add"]').on("click",function(){app.parseAndTranslate("admin/partials/groups/add-members",{},function(n){const C=[],m=s.dialog({title:"[[groups:details.add-member]]",message:n,buttons:{OK:{label:"[[groups:details.add-member]]",callback:function(){const h=[];m.find("[data-uid][data-selected]").each(function(l,E){h.push(C[$(E).attr("data-uid")])}),r(h,function(){m.modal("hide")})}}}});m.on("click","[data-username]",function(){$(this).attr("data-selected")==="1"?$(this).removeAttr("data-selected"):$(this).attr("data-selected",1),$(this).find("i").toggleClass("invisible")}),m.find("input").on("keyup",function(){v.get("/api/users",{query:$(this).val(),paginate:!1},function(h,l){if(h)return p.error(h);l.users.forEach(function(E){C[E.uid]=E}),app.parseAndTranslate("admin/partials/groups/add-members","users",{users:l.users},function(E){m.find("#search-result").html(E)})})})})})}function r(n,C){function m(){n=n.filter(function(l){return!$('[component="groups/members"] [data-uid="'+l.uid+'"]').length}),a(n,function(l){$('[component="groups/members"] tbody').prepend(l)}),C()}const h=n.map(function(l){return l.uid});i==="administrators"?socket.emit("admin.user.makeAdmins",h,function(l){if(l)return p.error(l);m()}):Promise.all(h.map(l=>v.put("/groups/"+ajaxify.data.group.slug+"/membership/"+l))).then(m).catch(p.error)}function f(){const n=$('[component="groups/members/search"]');n.on("keyup",utils.debounce(function(){const C=n.val();socket.emit("groups.searchMembers",{groupName:i,query:C},function(m,h){if(m)return p.error(m);a(h.users,function(l){$('[component="groups/members"] tbody').html(l),$('[component="groups/members"]').attr("data-nextstart",20)})})},250))}function g(){$('[component="groups/members"]').on("scroll",function(){const n=$(this),C=(n[0].scrollHeight-n.innerHeight())*.9;n.scrollTop()>C&&!$('[component="groups/members/search"]').val()&&d()})}function d(){const n=$('[component="groups/members"]');n.attr("loading")||(n.attr("loading",1),socket.emit("groups.loadMoreMembers",{groupName:i,after:n.attr("data-nextstart")},function(C,m){if(C)return p.error(C);m&&m.users.length?t(m.users,function(){n.removeAttr("loading"),n.attr("data-nextstart",m.nextStart)}):n.removeAttr("loading")}))}function t(n,C){n=n.filter(function(m){return!$('[component="groups/members"] [data-uid="'+m.uid+'"]').length}),a(n,function(m){$('[component="groups/members"] tbody').append(m),C()})}function a(n,C){app.parseAndTranslate(e,"group.members",{group:{members:n,isOwner:ajaxify.data.group.isOwner}},C)}return o}.apply(A,b),y!==void 0&&(D.exports=y)},74344:(D,A,u)=>{"use strict";u.r(A),u.d(A,{del:()=>d,get:()=>e,head:()=>c,patch:()=>f,post:()=>r,put:()=>g});var b=u(85233),y=u.n(b),v=u(63281),s=u.n(v);const p=config.relative_path+"/api/v3";async function o(t,a){if(t.url=t.url.startsWith("/api")?config.relative_path+t.url:p+t.url,typeof a=="function"){i(t).then(n=>a(null,n),n=>a(n));return}try{return await i(t)}catch(n){if(n.message==="A valid login session was not found. Please log in and try again.")return(0,v.confirm)("[[error:api.reauth-required]]",C=>{C&&ajaxify.go("login")});throw n}}async function i(t){const{url:a}=t;delete t.url,t.data&&!(t.data instanceof FormData)&&(t.data=JSON.stringify(t.data||{}),t.headers["content-type"]="application/json; charset=utf-8"),{options:t}=await(0,b.fire)("filter:api.options",{options:t}),t.data&&(t.body=t.data,delete t.data);const n=await fetch(a,t),{headers:C}=n,m=C.get("content-type"),h=m&&m.startsWith("application/json");let l;if(t.method!=="head"&&(h?l=await n.json():l=await n.text()),!n.ok)throw l?new Error(h?l.status.message:l):new Error(n.statusText);return h&&l&&l.hasOwnProperty("status")&&l.hasOwnProperty("response")?l.response:l}function e(t,a,n){return o({url:t+(a&&Object.keys(a).length?"?"+$.param(a):"")},n)}function c(t,a,n){return o({url:t+(a&&Object.keys(a).length?"?"+$.param(a):""),method:"head"},n)}function r(t,a,n){return o({url:t,method:"post",data:a,headers:{"x-csrf-token":config.csrf_token}},n)}function f(t,a,n){return o({url:t,method:"patch",data:a,headers:{"x-csrf-token":config.csrf_token}},n)}function g(t,a,n){return o({url:t,method:"put",data:a,headers:{"x-csrf-token":config.csrf_token}},n)}function d(t,a,n){return o({url:t,method:"delete",data:a,headers:{"x-csrf-token":config.csrf_token}},n)}},22905:(D,A,u)=>{"use strict";var b,y;b=[u(7927),u(73138)],y=function(v,s){const p={};return p.init=function(o,i){let e=null;i=i||{},i.privilege=i.privilege||"topics:read",i.states=i.states||["watching","notwatching","ignoring"],i.cacheList=i.hasOwnProperty("cacheList")?i.cacheList:!0;let c=[];Array.isArray(i.localCategories)&&(c=i.localCategories.map(t=>({...t}))),i.selectedCids=i.selectedCids||ajaxify.data.selectedCids||[];const r=o.find('[component="category-selector-search"]');if(!r.length)return;const f=r.parent('[component="category/dropdown"]').length>0||r.parent('[component="category-selector"]').length>0;o.on("show.bs.dropdown",function(){f&&(o.find(".dropdown-toggle").css({visibility:"hidden"}),r.removeClass("hidden"),r.css({"z-index":o.find(".dropdown-toggle").css("z-index")+1}));function t(){const a=r.find("input").val();a.length>1||!a&&!e?g(a,function(n){e=i.cacheList&&(e||n),d(n)}):!a&&e&&d(e)}r.on("click",function(a){a.preventDefault(),a.stopPropagation()}),r.find("input").val("").on("keyup",utils.debounce(t,300)),t()}),o.on("shown.bs.dropdown",function(){["xs","sm"].includes(utils.findBootstrapEnvironment())||r.find("input").focus()}),o.on("hide.bs.dropdown",function(){f&&(o.find(".dropdown-toggle").css({visibility:"inherit"}),r.addClass("hidden")),r.off("click"),r.find("input").off("keyup")});function g(t,a){socket.emit("categories.categorySearch",{search:t,query:utils.params(),parentCid:i.parentCid||0,selectedCids:i.selectedCids,privilege:i.privilege,states:i.states,showLinks:i.showLinks},function(n,C){if(n)return v.error(n);a(c.concat(C))})}function d(t){const a=i.selectedCids.map(String);t.forEach(function(n){n.selected=a.includes(String(n.cid))}),app.parseAndTranslate(i.template,{categoryItems:t.slice(0,200),selectedCategory:ajaxify.data.selectedCategory,allCategoriesUrl:ajaxify.data.allCategoriesUrl},function(n){o.find('[component="category/list"]').html(n.find('[component="category/list"]').html()),o.find('[component="category/list"] [component="category/no-matches"]').toggleClass("hidden",!!t.length);const C=s.Dropdown.getInstance(o.find(".dropdown-toggle").get(0));C&&C.update()})}},p}.apply(A,b),y!==void 0&&(D.exports=y)},50548:(D,A,u)=>{"use strict";var b,y;b=[u(22905),u(63281),u(85233),u(32230)],y=function(v,s,p,o){const i={};return i.init=function(e,c){if(!e||!e.length)return;c=c||{};const r=c.onSelect||function(){};c.states=c.states||["watching","notwatching","ignoring"],c.template=c.template||"partials/category/selector-dropdown-left",p.fire("action:category.selector.options",{el:e,options:c}),v.init(e,c);const f={el:e,selectedCategory:null};e.on("click","[data-cid]",function(){const d=$(this);return d.hasClass("disabled")?!1:(f.selectCategory(d.attr("data-cid")),r(f.selectedCategory))});let g=f.el.find('[component="category-selector-selected"]').html();return o.translate(g,d=>{g=d}),f.selectCategory=function(d){const t=f.el.find('[data-cid="'+d+'"]');f.selectedCategory={cid:d,name:t.attr("data-name")},t.length?f.el.find('[component="category-selector-selected"]').html(t.find('[component="category-markup"]').html()):f.el.find('[component="category-selector-selected"]').html(g)},f.getSelectedCategory=function(){return f.selectedCategory},f.getSelectedCid=function(){return f.selectedCategory?f.selectedCategory.cid:0},c.hasOwnProperty("selectedCategory")&&app.parseAndTranslate(c.template,{selectedCategory:c.selectedCategory},function(d){f.el.find('[component="category-selector-selected"]').html(d.find('[component="category-selector-selected"]').html())}),f},i.modal=function(e){e=e||{},e.onSelect=e.onSelect||function(){},e.onSubmit=e.onSubmit||function(){},app.parseAndTranslate("admin/partials/categories/select-category",{message:e.message},function(c){const r=s.dialog({title:e.title||"[[modules:composer.select-category]]",message:c,buttons:{save:{label:"[[global:select]]",className:"btn-primary",callback:g}}}),f=i.init(r.find('[component="category-selector"]'),e);function g(d){return d.preventDefault(),f.selectedCategory&&(e.onSubmit(f.selectedCategory),r.modal("hide")),!1}e.openOnLoad&&r.on("shown.bs.modal",function(){r.find(".dropdown-toggle").dropdown("toggle")}),r.find("form").on("submit",g)})},i}.apply(A,b),y!==void 0&&(D.exports=y)},38565:(D,A,u)=>{"use strict";var b,y;b=[u(7927),u(80034)],y=function(v){const s={coverEl:null,saveFn:null};s.init=function(o,i,e,c){s.coverEl=o,s.saveFn=i,o.find(".upload").on("click",e),o.find(".resize").on("click",function(){p(o)}),o.find(".remove").on("click",c),o.on("dragover",s.onDragOver).on("drop",s.onDrop),o.find(".save").on("click",s.save),o.addClass("initialised")},s.onDragOver=function(o){o.stopPropagation(),o.preventDefault(),o.originalEvent.dataTransfer.dropEffect="copy"},s.onDrop=function(o){o.stopPropagation(),o.preventDefault();const i=o.originalEvent.dataTransfer.files,e=new FileReader;i.length&&i[0].type.match("image.*")&&(e.onload=function(c){s.coverEl.css("background-image","url("+c.target.result+")"),s.newCover=c.target.result},e.readAsDataURL(i[0]),p(s.coverEl))};function p(o){o.toggleClass("active",1).backgroundDraggable({axis:"y",units:"percent"}),v.alert({alert_id:"drag_start",title:"[[modules:cover.dragging-title]]",message:"[[modules:cover.dragging-message]]",timeout:5e3})}return s.save=function(){s.coverEl.addClass("saving"),s.saveFn(s.newCover||void 0,s.coverEl.css("background-position"),function(o){o?v.error(o):(s.coverEl.toggleClass("active",0),s.coverEl.backgroundDraggable("disable"),s.coverEl.off("dragover",s.onDragOver),s.coverEl.off("drop",s.onDrop),v.success("[[modules:cover.saved]]")),s.coverEl.removeClass("saving")})},s}.apply(A,b),y!==void 0&&(D.exports=y)},98192:(D,A,u)=>{"use strict";var b,y;b=[u(7927)],y=function(v){const s={};s.show=function(e,c){const r=e.hasOwnProperty("fileSize")&&e.fileSize!==void 0?parseInt(e.fileSize,10):!1;app.parseAndTranslate("modals/upload-file",{showHelp:e.hasOwnProperty("showHelp")&&e.showHelp!==void 0?e.showHelp:!0,fileSize:r,title:e.title||"[[global:upload-file]]",description:e.description||"",button:e.button||"[[global:upload]]",accept:e.accept?e.accept.replace(/,/g,"&#44; "):""},function(f){f.modal("show"),f.on("hidden.bs.modal",function(){f.remove()});const g=f.find("#uploadForm");e.route&&g.attr("action",e.route),f.find("#fileUploadSubmitBtn").on("click",function(){return $(this).addClass("disabled"),e.uploadModal=f,i(e,c),!1})})},s.handleImageCrop=function(e,c){$("#crop-picture-modal").remove(),app.parseAndTranslate("modals/crop_picture",{url:utils.escapeHTML(e.url)},async function(r){r.modal({backdrop:"static"}).modal("show");const f=parseInt($(window).height()/2,10),g=document.getElementById("cropped-image");$(g).css("max-height",f);const d=(await u.e(31649).then(u.t.bind(u,33129,23))).default;let t=new d(g,{aspectRatio:e.aspectRatio,autoCropArea:1,viewMode:1,checkCrossOrigin:!0,cropmove:function(){e.restrictImageDimension&&(t.cropBoxData.width>e.imageDimension&&t.setCropBoxData({width:e.imageDimension}),t.cropBoxData.height>e.imageDimension&&t.setCropBoxData({height:e.imageDimension}))},ready:function(){if(!o(t,e))return r.modal("hide");if(e.restrictImageDimension){const a=g.width<g.height?g.width:g.height,n=a>e.imageDimension?e.imageDimension:a;t.setCropBoxData({width:n,height:n})}r.find(".rotate").on("click",function(){const a=this.getAttribute("data-degrees");t.rotate(a)}),r.find(".flip").on("click",function(){const a=this.getAttribute("data-option");this.getAttribute("data-method")==="scaleX"?t.scaleX(a):t.scaleY(a),this.setAttribute("data-option",a*-1)}),r.find(".reset").on("click",function(){t.reset()}),r.find(".crop-btn").on("click",function(){$(this).addClass("disabled");const a=o(t,e);a&&(r.find("#upload-progress-bar").css("width","0%"),r.find("#upload-progress-box").show().removeClass("hide"),p({data:e,imageData:a,progressBarEl:r.find("#upload-progress-bar")},function(n,C){if(n)return r.find("#upload-progress-box").hide(),r.find(".upload-btn").removeClass("disabled"),r.find(".crop-btn").removeClass("disabled"),v.error(n);c(C.url),r.modal("hide")}))}),r.find(".upload-btn").on("click",async function(){$(this).addClass("disabled"),t.destroy();const a=(await u.e(31649).then(u.t.bind(u,33129,23))).default;t=new a(g,{viewMode:1,autoCropArea:1,ready:function(){r.find(".crop-btn").trigger("click")}})})}})})};function p(e,c){const r={};r[e.data.paramName]=e.data.paramValue,r.method=e.data.socketMethod,r.size=e.imageData.length,r.progress=0;const f=1e5;function g(){const d=e.imageData.slice(r.progress,r.progress+f);socket.emit("uploads.upload",{chunk:d,params:r},function(t,a){if(t)return v.error(t);if(r.progress+f<r.size)return r.progress+=d.length,e.progressBarEl.css("width",(r.progress/r.size*100).toFixed(2)+"%"),setTimeout(g,100);e.progressBarEl.css("width","100%"),c(null,a)})}g()}function o(e,c){let r;try{r=c.imageType?e.getCroppedCanvas().toDataURL(c.imageType):e.getCroppedCanvas().toDataURL()}catch(f){["The operation is insecure.","Failed to execute 'toDataURL' on 'HTMLCanvasElement': Tainted canvases may not be exported."].indexOf(f.message)!==-1?v.error("[[error:cors-error]]"):v.error(f.message);return}return r}function i(e,c){function r(a,n){a==="error"&&e.uploadModal.find("#fileUploadSubmitBtn").removeClass("disabled"),e.uploadModal.find("#alert-"+a).translateText(n).removeClass("hide")}const f=e.uploadModal.find("#fileInput");if(!f.val())return r("error","[[uploads:select-file-to-upload]]");const g=f[0].files[0],d=e.hasOwnProperty("fileSize")&&e.fileSize!==void 0?parseInt(e.fileSize,10):!1;if(d&&g.size>d*1024)return r("error","[[error:file-too-big, "+d+"]]");if(g.name.endsWith(".gif")){u.e(3564).then(function(){var a=[u(50431)];(function(n){n.ajaxSubmit(e.uploadModal,c)}).apply(null,a)}).catch(u.oe);return}const t=new FileReader;t.addEventListener("load",function(){const a=t.result;e.uploadModal.modal("hide"),s.handleImageCrop({url:a,imageType:g.type,socketMethod:e.socketMethod,aspectRatio:e.aspectRatio,allowSkippingCrop:e.allowSkippingCrop,restrictImageDimension:e.restrictImageDimension,imageDimension:e.imageDimension,paramName:e.paramName,paramValue:e.paramValue},c)},!1),g&&t.readAsDataURL(g)}return s}.apply(A,b),y!==void 0&&(D.exports=y)},22568:(D,A,u)=>{"use strict";var b,y,v;(function(s){y=[u(20648)],b=s,v=typeof b=="function"?b.apply(A,y):b,v!==void 0&&(D.exports=v)})(function(s){const p=s("[^\\p{L}\\s\\d\\-_]","g"),o=/[^\w\s\d\-_]/g,i=/^\s+|\s+$/g,e=/\s+/g,c=/-+/g,r=/-$/g,f=/^-/g,g=/^[\w\d\s.,\-@]+$/;return function(t,a){return t?(t=String(t).replace(i,""),g.test(t)?t=t.replace(o,"-"):t=s.replace(t,p,"-"),t=a?t:t.toLocaleLowerCase(),t=t.replace(e,"-"),t=t.replace(c,"-"),t=t.replace(r,""),t=t.replace(f,""),t):""}})},80034:()=>{(function(D){var A=D(window),u=function(s,p,o,i){if(arguments.length===3||i){if(o<s)return s;if(o>p)return p}return o},b=function(s){s.clientX=s.originalEvent.touches[0].clientX,s.clientY=s.originalEvent.touches[0].clientY},y=function(s){var p=(s.css("background-image").match(/^url\(['"]?(.*?)['"]?\)$/i)||[])[1];if(p){var o={width:0,height:0},i=new Image;return i.onload=function(){if(s.css("background-size")=="cover"){var e=s.innerWidth(),c=s.innerHeight(),r=e/c;imageAspectRatio=i.width/i.height,scale=1,imageAspectRatio>=r?scale=c/i.height:scale=e/i.width,o.width=i.width*scale,o.height=i.height*scale}else o.width=i.width,o.height=i.height},i.src=p,o}};function v(s,p){this.element=s,this.options=p,this.init()}v.prototype.init=function(){var s=D(this.element),p=(s.css("background-image").match(/^url\(['"]?(.*?)['"]?\)$/i)||[])[1],o=this.options;if(p){var i={width:0,height:0};(o.bound||o.units=="percent")&&(i=y(s)),s.on("mousedown.dbg touchstart.dbg",function(e){if(e.target===s[0]){if(e.preventDefault(),e.originalEvent.touches)b(e);else if(e.which!==1)return;var c=e.clientX,r=e.clientY,f=s.css("background-position").match(/(-?\d+).*?\s(-?\d+)/)||[],g=parseInt(f[1])||0,d=parseInt(f[2])||0;o.units=="percent"&&(g=Math.round(g/-200*i.width),d=Math.round(d/-200*i.height)),A.on("mousemove.dbg touchmove.dbg",function(t){t.preventDefault(),t.originalEvent.touches&&b(t);var a=t.clientX,n=t.clientY;o.units=="percent"?(g=o.axis==="y"?g:u(-i.width/2,0,g+a-c,o.bound),d=o.axis==="x"?d:u(-i.height/2,0,d+n-r,o.bound),s.css("background-position",g/i.width*-200+"% "+d/i.height*-200+"%")):(g=o.axis==="y"?g:u(s.innerWidth()-i.width,0,g+a-c,o.bound),d=o.axis==="x"?d:u(s.innerHeight()-i.height,0,d+n-r,o.bound),s.css("background-position",g+"px "+d+"px")),c=a,r=n}),A.on("mouseup.dbg touchend.dbg mouseleave.dbg",function(){o.done&&o.done(),A.off("mousemove.dbg touchmove.dbg"),A.off("mouseup.dbg touchend.dbg mouseleave.dbg")})}})}},v.prototype.disable=function(){var s=D(this.element);s.off("mousedown.dbg touchstart.dbg"),A.off("mousemove.dbg touchmove.dbg mouseup.dbg touchend.dbg mouseleave.dbg")},D.fn.backgroundDraggable=function(p){var p=p,o=Array.prototype.slice.call(arguments,1);return this.each(function(){var i=D(this);if(typeof p>"u"||typeof p=="object"){p=D.extend({},D.fn.backgroundDraggable.defaults,p);var e=new v(this,p);i.data("dbg",e)}else if(typeof p=="string"&&i.data("dbg")){var e=i.data("dbg");v.prototype[p].apply(e,o)}})},D.fn.backgroundDraggable.defaults={bound:!0,axis:void 0,units:"pixels"}})(jQuery)}}]);

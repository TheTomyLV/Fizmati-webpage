(self.webpackChunknodebb=self.webpackChunknodebb||[]).push([[76590],{16907:(s,c,a)=>{s.exports=a(56968)},56968:(s,c,a)=>{"use strict";var i,r;i=[a(85233)],r=function(u){const l={};return l.init=function(){u.on("filter:taskbar.push",e=>{e.options.className="taskbar-"+e.module,e.module==="composer"?e.options.icon="fa-commenting-o":e.module==="chat"&&e.element.length&&!e.element.hasClass("active")&&p(e.element)}),u.on("action:taskbar.pushed",e=>{if(e.module==="chat"){d(e);const t=e.element.data();t&&t.options&&!t.options.isSelf&&p(e.element)}}),socket.on("event:chats.markedAsRead",function(e){$('#taskbar [data-roomid="'+e.roomId+'"]').removeClass("new").attr("data-content",0)});function d(e){$.getJSON(config.relative_path+"/api/user/"+app.user.userslug+"/chats/"+e.options.roomId,function(t){const o=$('#taskbar [data-uuid="'+e.uuid+'"] a');if(o.parent("[data-uuid]").attr("data-roomId",e.options.roomId),t.users.length===1){const n=t.users[0];o.find("i").remove(),n.picture?(o.css("background-image","url("+n.picture+")"),o.css("background-size","cover")):o.css("background-color",n["icon:bgColor"]).text(n["icon:text"]).addClass("avatar")}})}function p(e){const t=(parseInt($(e).attr("data-content"),10)||0)+1;$(e).attr("data-content",t)}},l}.apply(c,i),r!==void 0&&(s.exports=r)}}]);

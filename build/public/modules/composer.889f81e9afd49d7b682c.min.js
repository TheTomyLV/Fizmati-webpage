(self.webpackChunknodebb=self.webpackChunknodebb||[]).push([[89743,38786,70565,83014,99617,93230,588,62735,10882,28306,43034,79191,3564,92497,8311,59330,76830],{74344:(E,w,l)=>{"use strict";l.r(w),l.d(w,{del:()=>o,get:()=>a,head:()=>u,patch:()=>t,post:()=>f,put:()=>n});var v=l(85233),h=l.n(v),g=l(63281),d=l.n(g);const e=config.relative_path+"/api/v3";async function s(i,r){if(i.url=i.url.startsWith("/api")?config.relative_path+i.url:e+i.url,typeof r=="function"){m(i).then(c=>r(null,c),c=>r(c));return}try{return await m(i)}catch(c){if(c.message==="A valid login session was not found. Please log in and try again.")return(0,g.confirm)("[[error:api.reauth-required]]",b=>{b&&ajaxify.go("login")});throw c}}async function m(i){const{url:r}=i;delete i.url,i.data&&!(i.data instanceof FormData)&&(i.data=JSON.stringify(i.data||{}),i.headers["content-type"]="application/json; charset=utf-8"),{options:i}=await(0,v.fire)("filter:api.options",{options:i}),i.data&&(i.body=i.data,delete i.data);const c=await fetch(r,i),{headers:b}=c,S=b.get("content-type"),F=S&&S.startsWith("application/json");let p;if(i.method!=="head"&&(F?p=await c.json():p=await c.text()),!c.ok)throw p?new Error(F?p.status.message:p):new Error(c.statusText);return F&&p&&p.hasOwnProperty("status")&&p.hasOwnProperty("response")?p.response:p}function a(i,r,c){return s({url:i+(r&&Object.keys(r).length?"?"+$.param(r):"")},c)}function u(i,r,c){return s({url:i+(r&&Object.keys(r).length?"?"+$.param(r):""),method:"head"},c)}function f(i,r,c){return s({url:i,method:"post",data:r,headers:{"x-csrf-token":config.csrf_token}},c)}function t(i,r,c){return s({url:i,method:"patch",data:r,headers:{"x-csrf-token":config.csrf_token}},c)}function n(i,r,c){return s({url:i,method:"put",data:r,headers:{"x-csrf-token":config.csrf_token}},c)}function o(i,r,c){return s({url:i,method:"delete",data:r,headers:{"x-csrf-token":config.csrf_token}},c)}},47913:(E,w,l)=>{E.exports=l(66485)},45482:(E,w,l)=>{E.exports=l(35729)},83713:(E,w,l)=>{E.exports=l(51077)},38259:(E,w,l)=>{E.exports=l(65616)},66603:(E,w,l)=>{"use strict";var v;v=function(){function h(){this._store={},this._keys=[]}h.prototype.isMock=!0,h.prototype.setItem=function(e,s){e=String(e),this._keys.indexOf(e)===-1&&this._keys.push(e),this._store[e]=s},h.prototype.getItem=function(e){return e=String(e),this._keys.indexOf(e)===-1?null:this._store[e]},h.prototype.removeItem=function(e){e=String(e),this._keys=this._keys.filter(function(s){return s!==e}),this._store[e]=null},h.prototype.clear=function(){this._keys=[],this._store={}},h.prototype.key=function(e){return e=parseInt(e,10)||0,this._keys[e]},Object.defineProperty&&Object.defineProperty(h.prototype,"length",{get:function(){return this._keys.length}});let g;const d=Date.now().toString();try{if(g=window.localStorage,g.setItem(d,d),g.getItem(d)!==d)throw Error("localStorage behaved unexpectedly");return g.removeItem(d),g}catch(e){console.warn(e),console.warn("localStorage failed, falling back on sessionStorage");try{if(g=window.sessionStorage,g.setItem(d,d),g.getItem(d)!==d)throw Error("sessionStorage behaved unexpectedly");return g.removeItem(d),g}catch(s){return console.warn(s),console.warn("sessionStorage failed, falling back on memory storage"),new h}}}.call(w,l,w,E),v!==void 0&&(E.exports=v)},27145:(E,w,l)=>{"use strict";E=l.nmd(E);var v,h;v=[l(32230),l(85233)],h=function(g,d){const e={};let s=!1;e.init=function(){if(e.taskbar=$('[component="taskbar"]'),e.tasklist=e.taskbar.find("ul"),!e.taskbar.length||!e.tasklist.length){s=!0;return}e.taskbar.on("click","li",async function(){const t=$(this),n=t.attr("data-module"),o=t.attr("data-uuid"),i=await app.require(n);return t.hasClass("active")?i.minimize(o):(a(),i.load(o),e.toggleNew(o,!1),e.tasklist.removeClass("active"),t.addClass("active")),!1}),$(window).on("action:app.loggedOut",function(){e.closeAll()})},e.close=async function(t,n){if(s)return;if(e.tasklist.find('[data-module="'+E+'"][data-uuid="'+n+'"]').length){const i=await app.require(t);i&&typeof i.close=="function"&&i.close(n)}},e.closeAll=function(t){if(s)return;let n="[data-uuid]";t&&(n='[data-module="'+t+'"]'+n),e.tasklist.find(n).each(function(o,i){e.close(t||i.getAttribute("data-module"),i.getAttribute("data-uuid"))})},e.discard=function(t,n){if(s)return;e.tasklist.find('[data-module="'+t+'"][data-uuid="'+n+'"]').remove(),m()},e.push=function(t,n,o,i){if(i=i||function(){},s)return i();const r=e.tasklist.find('li[data-uuid="'+n+'"]'),c={module:t,uuid:n,options:o,element:r};d.fire("filter:taskbar.push",c),!r.length&&c.module?u(c,i):i(r)},e.get=function(t){return s?[]:$('[data-module="'+t+'"]').map(function(o,i){return $(i).data()})},e.minimize=function(t,n){if(s)return;e.tasklist.find('[data-module="'+t+'"][data-uuid="'+n+'"]').toggleClass("active",!1)},e.toggleNew=function(t,n,o){if(s)return;e.tasklist.find('[data-uuid="'+t+'"]').toggleClass("new",n),o||d.fire("action:taskbar.toggleNew",t)},e.updateActive=function(t){if(s)return;const n=e.tasklist.find("li");n.removeClass("active"),n.filter('[data-uuid="'+t+'"]').addClass("active"),$("[data-uuid]:not([data-module])").toggleClass("modal-unfocused",!0),$('[data-uuid="'+t+'"]:not([data-module])').toggleClass("modal-unfocused",!1)},e.isActive=function(t){return s?!1:e.tasklist.find('li[data-uuid="'+t+'"]').hasClass("active")};function m(){if(s)return;e.tasklist.find("li").length>0?e.taskbar.attr("data-active","1"):e.taskbar.removeAttr("data-active")}function a(){s||e.tasklist.find(".active").removeClass("active")}function u(t,n){if(s)return n();g.translate(t.options.title,function(o){const i=$("<div></div>").text(o||"NodeBB Task").html(),r=$("<li></li>").addClass(t.options.className).html('<a href="#"'+(t.options.image?` style="background-image: url('`+t.options.image.replace(/&#x2F;/g,"/")+`'); background-size: cover;"`:"")+">"+(t.options.icon?'<i class="fa '+t.options.icon+'"></i> ':"")+'<span aria-label="'+i+'" component="taskbar/title">'+i+"</span></a>").attr({title:i,"data-module":t.module,"data-uuid":t.uuid}).addClass(t.options.state!==void 0?t.options.state:"active");(!t.options.state||t.options.state==="active")&&a(),e.tasklist.append(r),m(),t.element=r,r.data(t),d.fire("action:taskbar.pushed",t),n(r)})}const f=function(t,n,o){switch(n){case"title":t.find('[component="taskbar/title"]').text(o);break;case"icon":t.find("i").attr("class","fa fa-"+o);break;case"image":t.find("a").css("background-image",o?'url("'+o.replace(/&#x2F;/g,"/")+'")':"");break;case"background-color":t.find("a").css("background-color",o);break;case"color":t.find("a").css("color",o);break}};return e.update=function(t,n,o){if(s)return;const i=e.tasklist.find('[data-module="'+t+'"][data-uuid="'+n+'"]');if(!i.length)return;const r=i.data();Object.keys(o).forEach(function(c){r[c]=o[c],f(i,c,o[c])}),i.data(r)},e}.apply(w,v),h!==void 0&&(E.exports=h)},62023:(E,w,l)=>{"use strict";var v,h;v=[l(74344),l(63281),l(7927),l(50431),l(59006),l(32230),l(62526)],h=function(g,d,e,s,m,a){const u={};return u.get=f=>g.get(`/topics/${f}/thumbs`,{}),u.getByPid=f=>g.get(`/posts/${f}`,{}).then(t=>u.get(t.tid)),u.delete=(f,t)=>g.del(`/topics/${f}/thumbs`,{path:t}),u.deleteAll=f=>{u.get(f).then(t=>{Promise.all(t.map(n=>u.delete(f,n.url)))})},u.upload=f=>new Promise(t=>{s.show({title:"[[topic:composer.thumb-title]]",method:"put",route:config.relative_path+`/api/v3/topics/${f}/thumbs`},function(n){t(n)})}),u.modal={},u.modal.open=function(f){const{id:t,pid:n}=f;let{modal:o}=f,i;return new Promise(r=>{Promise.all([u.get(t),n?u.getByPid(n):[]]).then(c=>new Promise(b=>{const S=c.reduce((F,p)=>F.concat(p));i=S.length,b(S)})).then(c=>m.render("modals/topic-thumbs",{thumbs:c})).then(c=>{o?a.translate(c,function(b){o.find(".bootbox-body").html(b),u.modal.handleSort({modal:o,numThumbs:i})}):(o=d.dialog({title:"[[modules:thumbs.modal.title]]",message:c,onEscape:!0,backdrop:!0,buttons:{add:{label:'<i class="fa fa-plus"></i> [[modules:thumbs.modal.add]]',className:"btn-success",callback:()=>(u.upload(t).then(()=>{u.modal.open({...f,modal:o}),Promise.all([l.e(61006),l.e(18099),l.e(10830),l.e(8311)]).then(function(){var b=[l(44541)];(S=>{S.updateThumbCount(t,$(`[component="composer"][data-uuid="${t}"]`)),r()}).apply(null,b)}).catch(l.oe)}),!1)},close:{label:"[[global:close]]",className:"btn-primary"}}}),u.modal.handleDelete({...f,modal:o}),u.modal.handleSort({modal:o,numThumbs:i}))})})},u.modal.handleDelete=f=>{f.modal.get(0).addEventListener("click",n=>{n.target.closest('button[data-action="remove"]')&&d.confirm("[[modules:thumbs.modal.confirm-remove]]",o=>{if(!o)return;const i=n.target.closest("[data-id]").getAttribute("data-id"),r=n.target.closest("[data-path]").getAttribute("data-path");g.del(`/topics/${i}/thumbs`,{path:r}).then(()=>{u.modal.open(f)}).catch(e.error)})})},u.modal.handleSort=({modal:f,numThumbs:t})=>{if(t>1){const n=f.find(".topic-thumbs-modal");n.sortable({items:"[data-id]"}),n.on("sortupdate",u.modal.handleSortChange)}},u.modal.handleSortChange=(f,t)=>{const n=t.item.get(0).parentNode.querySelectorAll("[data-id]");Array.from(n).forEach((o,i)=>{const r=o.getAttribute("data-id");let c=o.getAttribute("data-path");c=c.replace(new RegExp(`^${config.upload_url}`),""),g.put(`/topics/${r}/thumbs/order`,{path:c,order:i}).catch(e.error)})},u}.apply(w,v),h!==void 0&&(E.exports=h)},50431:(E,w,l)=>{"use strict";var v,h;v=[l(86569)],h=function(){const g={};g.show=function(a,u){const f=a.hasOwnProperty("fileSize")&&a.fileSize!==void 0?parseInt(a.fileSize,10):!1;app.parseAndTranslate("modals/upload-file",{showHelp:a.hasOwnProperty("showHelp")&&a.showHelp!==void 0?a.showHelp:!0,fileSize:f,title:a.title||"[[global:upload-file]]",description:a.description||"",button:a.button||"[[global:upload]]",accept:a.accept?a.accept.replace(/,/g,"&#44; "):""},function(t){t.modal("show"),t.on("hidden.bs.modal",function(){t.remove()});const n=t.find("#uploadForm");n.attr("action",a.route),n.find("#params").val(JSON.stringify(a.params)),t.find("#fileUploadSubmitBtn").on("click",function(){$(this).addClass("disabled"),n.submit()}),n.submit(function(){return d(t,f,u),!1})})},g.hideAlerts=function(a){$(a).find("#alert-status, #alert-success, #alert-error, #upload-progress-box").addClass("hide")};function d(a,u,f){e(a,"status","[[uploads:uploading-file]]"),a.find("#upload-progress-bar").css("width","0%"),a.find("#upload-progress-box").show().removeClass("hide");const t=a.find("#fileInput");if(!t.val())return e(a,"error","[[uploads:select-file-to-upload]]");if(!m(t[0],u))return e(a,"error","[[error:file-too-big, "+u+"]]");g.ajaxSubmit(a,f)}function e(a,u,f){g.hideAlerts(a),u==="error"&&a.find("#fileUploadSubmitBtn").removeClass("disabled"),f=f.replace(/&amp;#44/g,"&#44"),a.find("#alert-"+u).translateText(f).removeClass("hide")}g.ajaxSubmit=function(a,u){a.find("#uploadForm").ajaxSubmit({headers:{"x-csrf-token":config.csrf_token},error:function(t){t=s(t),e(a,"error",t.responseJSON?.status?.message||t.responseJSON?.error||`[[error:upload-error-fallback, ${t.status} ${t.statusText}]]`)},uploadProgress:function(t,n,o,i){a.find("#upload-progress-bar").css("width",i+"%")},success:function(t){let n=s(t);t.hasOwnProperty("response")&&t.hasOwnProperty("status")&&t.status.code==="ok"&&(n=t.response.images),u(n[0].url),e(a,"success","[[uploads:upload-success]]"),setTimeout(function(){g.hideAlerts(a),a.modal("hide")},750)}})};function s(a){if(typeof a=="string")try{return JSON.parse(a)}catch{return{error:"[[error:parse-error]]"}}return a}function m(a,u){return window.FileReader&&u?a.files[0].size<=u*1e3:!0}return g}.apply(w,v),h!==void 0&&(E.exports=h)},66485:(E,w,l)=>{"use strict";var v,h;v=[l(74344),l(7927)],h=function(g,d){const e={};e.init=function(t,n){const o=t.find(".draft-icon"),i=t.attr("data-uuid");function r(){$(`[component="composer"][data-uuid="${i}"]`).length&&(n.save_id||(n.save_id=utils.generateSaveId(app.user.uid)),e.addToDraftList("available",n.save_id),e.addToDraftList("open",n.save_id),a(t,o,n))}t.on("keyup","textarea, input.handle, input.title",utils.debounce(r,1e3)),t.on("click",'input[type="checkbox"]',utils.debounce(r,1e3)),t.on("click",'[component="category/list"] [data-cid]',utils.debounce(r,1e3)),t.on("itemAdded",".tags",utils.debounce(r,1e3)),t.on("thumb.uploaded",r),o.on("animationend",function(){$(this).toggleClass("active",!1)}),$(window).on("unload",function(){const c=e.getList("open");c.length&&c.forEach(b=>e.removeFromDraftList("open",b))}),e.migrateGuest(),e.migrateThumbs(...arguments)};function m(t){return parseInt(t,10)>0?localStorage:sessionStorage}e.get=function(t){if(!t)return null;const n=t.split(":")[1],o=m(n);try{const i=o.getItem(t),r=JSON.parse(i)||null;if(!r)throw new Error(`can't parse draft json for ${t}`);return r.save_id=t,r.timestamp&&(r.timestampISO=utils.toISOString(r.timestamp)),$(window).trigger("action:composer.drafts.get",{save_id:t,draft:r,storage:o}),r}catch{return console.warn(`[composer/drafts] Could not get draft ${t}, removing`),e.removeFromDraftList("available"),e.removeFromDraftList("open"),null}};function a(t,n,o){if(f(app.user.uid?"localStorage":"sessionStorage")&&o&&o.save_id&&t.length){const i=t.find("input.title"),r=i&&i.length&&i.val(),c=t.find("textarea").val(),b=m(app.user.uid);if(c.length||r&&r.length){const S={save_id:o.save_id,action:o.action,text:c,uuid:t.attr("data-uuid"),timestamp:Date.now()};if(o.action==="topics.post"){const F=t.find("input.tags").val();S.tags=F,S.title=r,S.cid=o.cid}else o.action==="posts.reply"?(S.title=o.title,S.tid=o.tid,S.toPid=o.toPid):o.action==="posts.edit"&&(S.pid=o.pid,S.title=r||o.title);app.user.uid||(S.handle=t.find("input.handle").val()),b.setItem(o.save_id,JSON.stringify(S)),$(window).trigger("action:composer.drafts.save",{storage:b,postData:o,postContainer:t}),n.toggleClass("active",!0)}else e.removeDraft(o.save_id)}}e.removeDraft=function(t){if(!t)return;e.removeFromDraftList("available",t),e.removeFromDraftList("open",t);const n=t.split(":")[1],o=m(n);o.removeItem(t),$(window).trigger("action:composer.drafts.remove",{storage:o,save_id:t})},e.getList=function(t){try{const n=localStorage.getItem(`drafts:${t}`);return JSON.parse(n)||[]}catch{return console.warn("[composer/drafts] Could not read list of available drafts"),[]}},e.addToDraftList=function(t,n){if(!f(app.user.uid?"localStorage":"sessionStorage")||!n)return;const o=e.getList(t);o.includes(n)||(o.push(n),localStorage.setItem("drafts:"+t,JSON.stringify(o)))},e.removeFromDraftList=function(t,n){if(!f(app.user.uid?"localStorage":"sessionStorage")||!n)return;const o=e.getList(t);o.includes(n)&&(o.splice(o.indexOf(n),1),localStorage.setItem("drafts:"+t,JSON.stringify(o)))},e.migrateGuest=function(){if(f("localStorage")&&app.user.uid){const t=/^composer:\d+:\d$/,n=Object.keys(sessionStorage).filter(function(r){return t.test(r)}),o=new Set([]),i=n.map(function(r){const c=r.split(":");return c[1]=app.user.uid,o.add(c.join(":")),c.join(":")});return n.forEach(function(r,c){localStorage.setItem(i[c],sessionStorage.getItem(r)),sessionStorage.removeItem(r)}),o.forEach(function(r){e.addToDraftList("available",r)}),o}},e.migrateThumbs=function(t,n){if(!app.uid)return;const o=t.attr("data-uuid"),i=e.get(n.save_id);i&&i.uuid&&g.put(`/topics/${i.uuid}/thumbs`,{tid:o}).then(()=>{Promise.all([l.e(66177),l.e(62526),l.e(61006),l.e(18099),l.e(10830),l.e(59330)]).then(function(){var r=[l(44541)];(function(c){c.updateThumbCount(o,t)}).apply(null,r)}).catch(l.oe)})},e.listAvailable=function(){return e.getList("available").map(e.get)},e.getAvailableCount=function(){return e.listAvailable().length},e.open=function(t){if(!t)return;const n=e.get(t);u(t,n)},e.loadOpen=function(){if(ajaxify.data.template.login||ajaxify.data.template.register||config.hasOwnProperty("openDraftsOnPageLoad")&&!config.openDraftsOnPageLoad)return;const t=e.getList("available"),n=e.getList("open");t.length&&t.forEach(function(o){if(!o||n.includes(o))return;const i=e.get(o);if(!i||!i.text&&!i.title){e.removeFromDraftList("available",o),e.removeFromDraftList("open",o);return}u(o,i)})};function u(t,n){const i=t.split(":")[1];parseInt(app.user.uid,10)===parseInt(i,10)&&Promise.all([l.e(66177),l.e(62526),l.e(61006),l.e(18099),l.e(10830),l.e(59330)]).then(function(){var r=[l(44541)];(function(c){n.action==="topics.post"?c.newTopic({save_id:n.save_id,cid:n.cid,handle:app.user&&app.user.uid?void 0:utils.escapeHTML(n.handle),title:utils.escapeHTML(n.title),body:n.text,tags:String(n.tags||"").split(",")}):n.action==="posts.reply"?g.get("/topics/"+n.tid,{},function(b,S){if(b)return d.error(b);c.newReply({save_id:n.save_id,tid:n.tid,toPid:n.toPid,title:S.title,body:n.text})}):n.action==="posts.edit"&&c.editPost({save_id:n.save_id,pid:n.pid,title:n.title?utils.escapeHTML(n.title):void 0,body:n.text})}).apply(null,r)}).catch(l.oe)}function f(t){var n;try{n=window[t];var o="__storage_test__";return n.setItem(o,o),n.removeItem(o),!0}catch(i){return i instanceof DOMException&&(i.code===22||i.code===1014||i.name==="QuotaExceededError"||i.name==="NS_ERROR_DOM_QUOTA_REACHED")&&n&&n.length!==0}}return e}.apply(w,v),h!==void 0&&(E.exports=h)},35729:(E,w,l)=>{"use strict";var v,h;v=[l(83713),l(38259),l(62023),l(10577)],h=function(g,d,e,s){var m={},a={picture:function(){var t=this;t.find("#files").click()},upload:function(){var t=this;t.find("#files").click()},thumbs:function(){m.exitFullscreen();var t=this;Promise.all([l.e(61006),l.e(18099),l.e(10830),l.e(92497)]).then(function(){var n=[l(44541)];(function(o){const i=t.get(0).getAttribute("data-uuid"),r=o.posts[i];(r.action==="topics.post"||r.action==="posts.edit"&&r.isMain)&&e.modal.open({id:i,pid:r.pid}).then(()=>{t.trigger("thumb.uploaded"),o.updateThumbCount(i,t)})}).apply(null,n)}).catch(l.oe)},tags:function(){var t=this;t.find(".tags-container").toggleClass("hidden")},zen:function(){var t=this;$(window).one("resize",function(){function n(){s.isFullscreen||(app.toggleNavbar(!0),$("html").removeClass("zen-mode"),d.reposition(t),$(window).off("resize",n))}s.isFullscreen&&(app.toggleNavbar(!1),$("html").addClass("zen-mode"),t.find(".write").focus(),$(window).on("resize",n),$(window).one("action:composer.topics.post action:composer.posts.reply action:composer.posts.edit action:composer.discard",s.exit))}),s.toggle(t.get(0)),$(window).trigger("action:composer.fullscreen",{postContainer:t})}},u=[];m.exitFullscreen=function(){s.isEnabled&&s.isFullscreen&&s.exit()},m.addComposerButtons=function(){const t=$(".formatting-bar"),n=t.find(".formatting-group #fileForm");u.forEach(i=>{let r="";Array.isArray(i.dropdownItems)&&i.dropdownItems.length?r=f(i):r=`
					<li data-format="${i.name}" title="${i.title||""}" href="#" class="btn btn-sm btn-link text-reset position-relative" tabindex="-1">
						<i class="${i.iconClass}"></i>
					</li>
				`,n.before(r)}),t.find(".formatting-group>li").tooltip({container:"#content",animation:!1,trigger:"manual"}).on("mouseenter",function(i){const r=$(i.target);r.hasClass("dropdown-menu")||!!r.parents(".dropdown-menu").length||$(this).tooltip("show")}).on("click mouseleave",function(){$(this).tooltip("hide")})};function f(t){const n=t.dropdownItems.map(function(o){let i="";return o.badge&&(i='<span class="px-1 position-absolute top-0 start-100 translate-middle-x badge rounded text-bg-info"></span>'),`
				<li data-format="${o.name}">
					<a href="#" class="dropdown-item rounded-1 position-relative">
						<i class="${o.iconClass} text-secondary"></i> ${o.text}
						${i}
					</a>
				</li>
			`});return`
			<li class="dropdown bottom-sheet" tab-index="-1" title="${t.title}">
				<button class="btn btn-sm btn-link text-reset" data-bs-toggle="dropdown" >
					<i class="${t.iconClass}"></i>
				</button>
				<ul class="dropdown-menu p-1">
				${n}
				</ul>
			</li>
		`}return m.addButton=function(t,n,o,i){i=i||t.replace("fa fa-",""),a[i]=n,u.push({name:i,iconClass:t,title:o})},m.addDropdown=function(t){u.push({iconClass:t.iconClass,title:t.title,dropdownItems:t.dropdownItems}),t.dropdownItems.forEach(n=>{n.name&&n.onClick&&(a[n.name]=n.onClick)})},m.getDispatchTable=function(){return a},m.addButtonDispatch=function(t,n){a[t]=n},m.addHandler=function(t){t.on("click",".formatting-bar li[data-format]",function(n){var o=$(this).attr("data-format"),i=$(this).parents('[component="composer"]').find("textarea")[0];a.hasOwnProperty(o)&&(a[o].call(t,i,i.selectionStart,i.selectionEnd,n),g.render(t))})},m}.apply(w,v),h!==void 0&&(E.exports=h)},51077:(E,w,l)=>{"use strict";var v,h;v=[l(85233)],h=function(g){var d={};return d.render=function(e,s){if(s=s||function(){},!e.find(".preview-container").is(":visible"))return s();var m=e.find("textarea");socket.emit("plugins.composer.renderPreview",m.val(),function(a,u){a||(u=$("<div>"+u+"</div>"),u.find("img:not(.not-responsive)").addClass("img-fluid"),e.find(".preview").html(u),g.fire("action:composer.preview",{postContainer:e,preview:u}),s())})},d.matchScroll=function(e){if(e.find(".preview-container").is(":visible")){var s=e.find("textarea"),m=e.find(".preview");if(s.length&&m.length){var a=s[0].scrollHeight-s.height();if(a===0)return;var u=s.scrollTop()/a;m.scrollTop(Math.max(m[0].scrollHeight-m.height(),0)*u)}}},d.handleToggler=function(e){const s=e.get(0);d.env=utils.findBootstrapEnvironment();const m=["xs","sm"].includes(d.env),a=s.querySelector('.formatting-bar [data-action="preview"]'),u=a.querySelector(".show-text"),f=a.querySelector(".hide-text"),t=localStorage.getItem("composer:previewToggled"),n=config["composer-default"].hidePreviewOnOpen==="on";let o=!m&&(t===null&&!n||t==="true");const i=s.querySelector(".preview-container"),r=s.querySelector(".write-container");if(!a)return;function c(b){m?(i.classList.toggle("hide",!1),r.classList.toggle("maximized",!1),i.classList.toggle("d-none",!b),i.classList.toggle("d-flex",b),i.classList.toggle("w-100",b),r.classList.toggle("d-flex",!b),r.classList.toggle("d-none",b),r.classList.toggle("w-100",!b)):(i.classList.toggle("hide",!b),r.classList.toggle("w-50",b),r.classList.toggle("w-100",!b),localStorage.setItem("composer:previewToggled",b)),u.classList.toggle("hide",b),f.classList.toggle("hide",!b),b&&d.render(e),d.matchScroll(e)}d.toggle=c,a.addEventListener("click",b=>{b.button===0&&(o=!o,c(o))}),c(o)},d}.apply(w,v),h!==void 0&&(E.exports=h)},65616:(E,w,l)=>{"use strict";var v,h;v=[l(27145)],h=function(g){var d={},e=0,s=.3,m=.05,a=768,u=$("body"),f=$(window),t=$('[component="navbar"]');const n=document.getElementById("content");var o=t[0];function i(){return localStorage.getItem("composer:resizeRatio")||.5}function r(p){localStorage.setItem("composer:resizeRatio",Math.min(p,1))}function c(){var p;o?p=o.getBoundingClientRect():p={bottom:0};var A=Math.max(p.bottom,0),x={top:0,left:0,right:window.innerWidth,bottom:window.innerHeight};return x.width=x.right,x.height=x.bottom,x.boundedTop=A,x.boundedHeight=x.bottom-A,x}function b(p,A){var x=c(),I=p[0],L=window.getComputedStyle(I),T=parseInt(L.getPropertyValue("min-height"),10),k=Math.max(T/window.innerHeight,s);if(x.width>=a){const z=(x.height-x.boundedHeight)/x.height;A=Math.min(Math.max(A,k+z),1);var O=A*x.boundedHeight/x.height;I.style.top=((1-O)*100).toString()+"%";var R=I.getBoundingClientRect();n.style.paddingBottom=(R.bottom-R.top).toString()+"px"}else I.style.top=0,n.style.paddingBottom=0;p.ratio=A,g.updateActive(p.attr("data-uuid"))}var S=b,F=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame;return F&&(S=function(p,A){F(function(){b(p,A),setTimeout(function(){f.trigger("action:composer.resize"),p.trigger("action:composer.resize")},0)})}),d.reposition=function(p){var A=i();A>=1-m&&(A=1,p.addClass("maximized")),S(p,A)},d.maximize=function(p,A){A?S(p,1):d.reposition(p)},d.handleResize=function(p){var A=0,x=0,I=0,L=p.find(".resizer"),T=L[0];function k(y){var C=T.getBoundingClientRect(),P=(C.top+C.bottom)/2;A=(P-y.clientY)/2,x=y.clientY,f.on("mousemove",O),f.on("mouseup",R),u.on("touchmove",z)}function O(y){var C=y.clientY-A,P=c(),D=(P.height-C)/P.boundedHeight;S(p,D)}function R(y){y.preventDefault(),I=y.clientY,p.find("textarea").focus(),f.off("mousemove",O),f.off("mouseup",R),u.off("touchmove",z);var C=I-A,P=c(),D=(P.height-C)/P.boundedHeight;I-x===0&&p.hasClass("maximized")?(p.removeClass("maximized"),D=!e||e>=1-m?.5:e,S(p,D)):I-x===0||D>=1-m?(S(p,1),p.addClass("maximized"),e=D):p.removeClass("maximized"),r(D)}function z(y){y.preventDefault(),O(y.touches[0])}L.on("mousedown",function(y){y.button===0&&(y.preventDefault(),k(y))}).on("touchstart",function(y){y.preventDefault(),k(y.touches[0])}).on("touchend",R)},d}.apply(w,v),h!==void 0&&(E.exports=h)},10577:E=>{/*!
* screenfull
* v5.2.0 - 2021-11-03
* (c) Sindre Sorhus; MIT License
*/(function(){"use strict";var w=typeof window<"u"&&typeof window.document<"u"?window.document:{},l=E.exports,v=function(){for(var d,e=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]],s=0,m=e.length,a={};s<m;s++)if(d=e[s],d&&d[1]in w){for(s=0;s<d.length;s++)a[e[0][s]]=d[s];return a}return!1}(),h={change:v.fullscreenchange,error:v.fullscreenerror},g={request:function(d,e){return new Promise(function(s,m){var a=function(){this.off("change",a),s()}.bind(this);this.on("change",a),d=d||w.documentElement;var u=d[v.requestFullscreen](e);u instanceof Promise&&u.then(a).catch(m)}.bind(this))},exit:function(){return new Promise(function(d,e){if(!this.isFullscreen){d();return}var s=function(){this.off("change",s),d()}.bind(this);this.on("change",s);var m=w[v.exitFullscreen]();m instanceof Promise&&m.then(s).catch(e)}.bind(this))},toggle:function(d,e){return this.isFullscreen?this.exit():this.request(d,e)},onchange:function(d){this.on("change",d)},onerror:function(d){this.on("error",d)},on:function(d,e){var s=h[d];s&&w.addEventListener(s,e,!1)},off:function(d,e){var s=h[d];s&&w.removeEventListener(s,e,!1)},raw:v};if(!v){l?E.exports={isEnabled:!1}:window.screenfull={isEnabled:!1};return}Object.defineProperties(g,{isFullscreen:{get:function(){return!!w[v.fullscreenElement]}},element:{enumerable:!0,get:function(){return w[v.fullscreenElement]}},isEnabled:{enumerable:!0,get:function(){return!!w[v.fullscreenEnabled]}}}),l?E.exports=g:window.screenfull=g})()}}]);

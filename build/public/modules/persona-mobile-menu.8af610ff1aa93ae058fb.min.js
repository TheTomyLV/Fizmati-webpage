(self.webpackChunknodebb=self.webpackChunknodebb||[]).push([[43111,38786,26721,28306],{97051:(D,I,u)=>{D.exports=u(53984)},7073:(D,I,u)=>{"use strict";var k,m;k=[u(32230),u(66603),u(85233),u(7927),u(73138)],m=function(v,y,h,o,t){const e={current:{}};e.init=function(n){if(!config.searchEnabled)return;n=n||{in:config.searchDefaultInQuick||"titles"},$('[component="search/form"]').each((c,i)=>{s($(i),n)})};function s(n,l){const c=n.find('[component="search/button"]'),i=n.find('[component="search/fields"]'),a=i.find('input[name="query"]'),p=i.find("#quick-search-container"),w=i.hasClass("hidden");n.find(".advanced-search-link").off("mousedown").on("mousedown",function(){ajaxify.go("/search")}),w&&a.off("blur").on("blur",function(){setTimeout(function(){a.is(":focus")||(i.addClass("hidden"),c.removeClass("hidden"))},200)}),a.off("focus");const g={inputEl:a,resultEl:p};e.enableQuickSearch({searchOptions:l,searchElements:g}),c.off("click").on("click",function(C){return!config.loggedIn&&!app.user.privileges["search:content"]?(o.alert({message:"[[error:search-requires-login]]",timeout:3e3}),ajaxify.go("login"),!1):(C.stopPropagation(),e.showAndFocusInput(n),!1)}),n.off("submit").on("submit",function(){const C=$(this).find('input[name="query"]'),d=e.getSearchPreferences();return d.term=C.val(),d.in=l.in,h.fire("action:search.submit",{searchOptions:d,searchElements:g}),e.query(d,function(){C.val(""),a.trigger("blur")}),!1})}e.enableQuickSearch=function(n){if(!config.searchEnabled||!app.user.privileges["search:content"])return;const l=Object.assign({in:config.searchDefaultInQuick||"titles"},n.searchOptions),c=n.searchElements.resultEl,i=n.searchElements.inputEl;let a=i.val();const p=c.find(".filter-category");function w(){ajaxify.data.template.category&&ajaxify.data.cid&&v.translate("[[search:search-in-category, "+ajaxify.data.name+"]]",function(f){const b=$("<div></div>").html(f).text();p.find(".name").text(b)}),p.toggleClass("hidden",!(ajaxify.data.template.category&&ajaxify.data.cid))}function g(){n.searchOptions=Object.assign({},l),n.searchOptions.term=i.val(),w(),ajaxify.data.template.category&&ajaxify.data.cid&&p.find('input[type="checkbox"]').is(":checked")&&(n.searchOptions.categories=[ajaxify.data.cid],n.searchOptions.searchChildren=!0),n.hideDuringSearch||(c.removeClass("hidden").find(".quick-search-results-container").html(""),c.find(".loading-indicator").removeClass("hidden")),h.fire("action:search.quick.start",n),n.searchOptions.searchOnly=1,e.api(n.searchOptions,function(f){if(c.find(".loading-indicator").addClass("hidden"),!f.posts||n.hideOnNoMatches&&!f.posts.length)return c.addClass("hidden").find(".quick-search-results-container").html("");f.posts.forEach(function(b){const x=$("<div>"+b.content+"</div>").text(),M=i.val().toLowerCase().replace(/^in:topic-\d+/,""),S=Math.max(0,x.toLowerCase().indexOf(M)-40);b.snippet=utils.escapeHTML((S>0?"...":"")+x.slice(S,S+80)+(x.length-S>80?"...":""))}),app.parseAndTranslate("partials/quick-search-results",f,function(b){b.length&&b.find(".timeago").timeago(),c.toggleClass("hidden",!b.length||!i.is(":focus")).find(".quick-search-results-container").html(b.length?b:"");const x=c.find(".quick-search-results .quick-search-title, .quick-search-results .snippet");e.highlightMatches(n.searchOptions.term,x),h.fire("action:search.quick.complete",{data:f,options:n})})})}c.find('.filter-category input[type="checkbox"]').on("change",function(){i.focus(),g()}),i.off("keyup").on("keyup",utils.debounce(function(){if(i.val().length<3){c.addClass("hidden"),a=i.val();return}if(i.val()!==a){if(a=i.val(),!i.is(":focus"))return c.addClass("hidden");g()}},500));let C=!1;c.on("mousedown",".quick-search-results > *",function(){$(window).one("mouseup",function(){c.addClass("hidden")}),C=!0}),i.on("blur",function(){setTimeout(function(){!i.is(":focus")&&!C&&!c.hasClass("hidden")&&c.addClass("hidden")},200)});let d=!1;h.on("action:ajaxify.end",function(){ajaxify.isCold()||(d=!0)}),i.on("focus",function(){C=!1;const f=i.val();a=f,f&&c.find("#quick-search-results").children().length&&(w(),d?(g(),d=!1):c.removeClass("hidden"),i[0].setSelectionRange(f.startsWith("in:topic")?f.indexOf(" ")+1:0,f.length))}),i.off("refresh").on("refresh",function(){g()})},e.showAndFocusInput=function(n){const l=n.parents(".dropdown-menu");if(l.length){const c=l.siblings("[data-bs-toggle]"),i=t.Dropdown.getOrCreateInstance(c[0]);i&&i.show()}else n.find('[component="search/fields"]').removeClass("hidden"),n.find('[component="search/button"]').addClass("hidden"),n.find('[component="search/fields"] input[name="query"]').trigger("focus")},e.query=function(n,l){l=l||function(){},ajaxify.go("search?"+r(n),l)},e.api=function(n,l){const c=config.relative_path+"/api/search?"+r(n);n.hasOwnProperty("searchOnly")&&delete n.searchOnly;const i=config.relative_path+"/search?"+r(n);$.get(c,function(a){a.url=i,l(a)})};function r(n){const l=n.in||"titles";let c=n.term.replace(/^[ ?#]*/,"");try{c=encodeURIComponent(c)}catch{return o.error("[[error:invalid-search-term]]")}const i={...n,term:c,in:l};return h.fire("action:search.createQueryString",{query:i,data:n}),decodeURIComponent($.param(i))}return e.getSearchPreferences=function(){try{return JSON.parse(y.getItem("search-preferences")||"{}")}catch{return{}}},e.highlightMatches=function(n,l){if(!n||!l.length)return;n=utils.escapeHTML(n.replace(/^"/,"").replace(/"$/,"").trim());const c=n.split(" ").filter(a=>a.length>1).map(function(a){return utils.escapeRegexChars(a)}).join("|"),i=new RegExp("("+c+")","gi");l.each(function(){const a=$(this),p=[];a.find("*").each(function(){$(this).after("<!-- "+p.length+" -->"),p.push($("<div></div>").append($(this)))}),a.html(a.html().replace(i,function(w,g){return'<strong class="search-match fw-bold text-decoration-underline">'+g+"</strong>"})),p.forEach(function(w,g){a.html(a.html().replace("<!-- "+g+" -->",function(){return w.html()}))})}),$(".search-result-text").find("img:not(.not-responsive)").addClass("img-fluid")},e}.apply(I,k),m!==void 0&&(D.exports=m)},66603:(D,I,u)=>{"use strict";var k;k=function(){function m(){this._store={},this._keys=[]}m.prototype.isMock=!0,m.prototype.setItem=function(h,o){h=String(h),this._keys.indexOf(h)===-1&&this._keys.push(h),this._store[h]=o},m.prototype.getItem=function(h){return h=String(h),this._keys.indexOf(h)===-1?null:this._store[h]},m.prototype.removeItem=function(h){h=String(h),this._keys=this._keys.filter(function(o){return o!==h}),this._store[h]=null},m.prototype.clear=function(){this._keys=[],this._store={}},m.prototype.key=function(h){return h=parseInt(h,10)||0,this._keys[h]},Object.defineProperty&&Object.defineProperty(m.prototype,"length",{get:function(){return this._keys.length}});let v;const y=Date.now().toString();try{if(v=window.localStorage,v.setItem(y,y),v.getItem(y)!==y)throw Error("localStorage behaved unexpectedly");return v.removeItem(y),v}catch(h){console.warn(h),console.warn("localStorage failed, falling back on sessionStorage");try{if(v=window.sessionStorage,v.setItem(y,y),v.getItem(y)!==y)throw Error("sessionStorage behaved unexpectedly");return v.removeItem(y),v}catch(o){return console.warn(o),console.warn("sessionStorage failed, falling back on memory storage"),new m}}}.call(I,u,I,D),k!==void 0&&(D.exports=k)},53984:(D,I,u)=>{"use strict";var k,m;k=[u(10442),u(66603),u(7927),u(7073)],m=function(v,y,h,o){const t={};return t.init=function(){if(!v)return;const e=document.getElementById("panel"),s=document.getElementById("menu"),r=document.getElementById("chats-menu");if(!s||!r)return;const n=app.user&&parseInt(app.user.uid,10);let l=!!y.getItem("persona:menus:legacy-layout");const c=window.innerWidth;l&&($("#mobile-menu").removeClass("float-start"),$("#mobile-chats").addClass("float-start")),document.documentElement.getAttribute("data-dir")==="rtl"&&(l=!l);const i=v.create({panel:e,menu:s,width:256,margin:c,side:l?"right":"left"});$("#menu").removeClass("hidden");let a;n&&(a=v.create({panel:e,menu:r,width:256,margin:c,side:l?"left":"right"}),$("#chats-menu").removeClass("hidden"));function p(){i.close(),a&&a.close()}function w(){document.documentElement.classList.add("slideout-open")}function g(){$("#mobile-menu").blur(),document.documentElement.classList.remove("slideout-open"),$("#panel").off("click",p)}$(window).on("resize action:ajaxify.start",function(){i.close(),a&&a.close()}),i.ignore("code, code *, .preventSlideout, .preventSlideout *").on("closed",g).on("beforeopen",w).on("opened",function(){$("#panel").one("click",p)}),n&&a.ignore("code, code *, .preventSlideout, .preventSlideout *").on("closed",g).on("beforeopen",w).on("opened",function(){$("#panel").one("click",p)}),$("#mobile-menu").on("click",function(){i.enable().toggle()}),n&&i.on("beforeopen",function(){a.close(),a.disable()}).on("closed",function(){a.enable()}),$('#menu [data-section="navigation"] ul').html($("#main-nav").html()+($("#logged-out-menu").html()||"")),$("#user-control-list").children().clone(!0,!0).appendTo($('#chats-menu [data-section="profile"] ul')),socket.on("event:user_status_change",function(b){parseInt(b.uid,10)===app.user.uid&&(app.updateUserStatus($('#chats-menu [component="user/status"]'),b.status),i.close())});function C(){Promise.all([u.e(42840),u.e(93216),u.e(49100)]).then(function(){var b=[u(69986),u(93216)];(function(x,M){const S=$('#chats-menu [data-section="notifications"] ul');x.loadNotifications(S,function(){S.find(".deco-none").removeClass("deco-none"),M.loadChatsDropdown($("#chats-menu .chat-list"))})}).apply(null,b)}).catch(u.oe)}n&&($("#mobile-chats").removeClass("hidden").on("click",function(){i.close(),a.enable().toggle()}),$("#chats-menu").on("click","li[data-roomid]",function(){a.close()}),a.on("opened",C).on("beforeopen",function(){i.close().disable()}).on("closed",function(){i.enable()}));const d=$('.navbar .navbar-search input[name="term"]'),f=$('.navbar .navbar-search button[type="button"]');f.off("click").on("click",function(){return!config.loggedIn&&!app.user.privileges["search:content"]?(h.alert({message:"[[error:search-requires-login]]",timeout:3e3}),ajaxify.go("login"),!1):(f.addClass("hidden"),d.removeClass("hidden").focus(),!1)}),d.on("blur",function(){d.addClass("hidden"),f.removeClass("hidden")}),o.enableQuickSearch({searchElements:{inputEl:d,resultEl:$(".navbar .navbar-search .quick-search-container")},searchOptions:{in:config.searchDefaultInQuick}})},t}.apply(I,k),m!==void 0&&(D.exports=m)},10442:function(D){(function(I,u){D.exports=u()})(this,function(){"use strict";function I(o,t){for(var e in t)t.hasOwnProperty(e)&&(o[e]=t[e]);function s(){this.constructor=o}o.prototype=t===null?Object.create(t):(s.prototype=t.prototype,new s)}function u(o,t){if(!o)throw TypeError("Invalid arguments: "+t)}function k(){Element.prototype.matches=Element.prototype.matches||Element.prototype.matchesSelector||Element.prototype.webkitMatchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector||Element.prototype.oMatchesSelector,Object.entries=function(o){return Object.keys(o).map(function(t){return[t,o[t]]})},Object.values=function(o){return Object.keys(o).map(function(t){return o[t]})},Object.assign=Object.assign||function(o){for(var t=[],e=1;e<arguments.length;e++)t[e-1]=arguments[e];for(var s=0,r=t;s<r.length;s++)for(var n=r[s],l=0,c=Object.entries(n);l<c.length;l++){var i=c[l],a=i[0],p=i[1];o[a]=p}return o},Array.prototype.includes=function(t){return this.indexOf(t)!==-1}}var m=["linear","ease","ease-in","ease-out","ease-in-out","step-start","step-end"],v=function(){function o(t){var e=this;if(this.styles={base:{menu:{},panel:{}},open:{menu:{},panel:{}},closed:{menu:{},panel:{}}},this.handlers={beforeclose:[],closed:[],beforeopen:[],opened:[],touchstart:[],touchmove:[],touchend:[]},this.state={opened:!1,opening:!1,closed:!0,closing:!1},this.disabled=!1,!Object.values(o.modes).some(function(f){return e instanceof f}))throw TypeError("Calling this constructor is not allowed. Use `Pulling.create` instead");var s=t.menu,r=t.panel,n=t.side,l=t.mode,c=t.margin,i=t.timing,a=t.timingFunction,p=t.width,w=t.sensitivity,g=t.slope,C=t.touch,d=t.openPanelClass;this.menu=s,this.panel=r,this.side=n||"left",this.mode=l||"drawer",this.margin=c||25,this.timing=i||200,this.timingFunction=a||"ease",this.width=p||256,this.sensitivity=w||.25,this.slope=g||.5,this.openPanelClass=d||null,u(s instanceof Element,"`menu` must be of type `Element`"),u(r instanceof Element,"`panel` must be of type `Element`"),u(this.side==="left"||this.side==="right",'`side` must be equal to "left" or "right"'),u(typeof this.margin=="number",'`margin` must be of type "number"'),u(typeof this.timing=="number",'`timing` must be of type "number"'),u(m.includes(this.timingFunction),"`timingFunction` must be one of "+m.map(function(f){return'"'+f+'"'}).join(", ")),u(typeof this.width=="number",'`width` must be of type "number"'),u(typeof this.sensitivity=="number",'`sensitivity` must be of type "number"'),u(typeof this.slope=="number",'`slope` must be of type "number"')}return o.create=function(t){var e=t.mode||Object.keys(o.modes)[0]||"drawer";if(!o.modes[e]){var s=Object.keys(o.modes).map(function(r){return'"'+r+'"'}).join(", ");throw TypeError("`mode` must be one of "+s)}return new o.modes[e](t)},o.prototype.emit=function(t,e){var s=this;this.handlers[t].forEach(function(r){return r.call(s,e)})},o.prototype.on=function(t,e){return this.handlers[t].push(e),this},o.prototype.off=function(t,e){return e?this.handlers[t]=this.handlers[t].filter(function(s){return s!==e}):this.handlers[t]=[],this},o.prototype.open=function(t){var e=this;if(this.emit("beforeopen",t),this.disabled)return this;if(this.state.opened)return this;this.state.closed=!1,this.state.closing=!1,this.state.opening=!0,this.state.opened=!1,this.openPanelClass&&document.documentElement.classList.add(this.openPanelClass);var s=this.offset();if(s>0){var r=this.timing*(1-s/this.width)+"ms";this.menu.style.transitionDuration=r,this.panel.style.transitionDuration=r}Object.assign(this.menu.style,this.styles.open.menu),Object.assign(this.panel.style,this.styles.open.panel);var n=function(){e.state.opening=!1,e.state.opened=!0,Object.assign(e.menu.style,e.styles.open.menu),Object.assign(e.panel.style,e.styles.open.panel),e.emit("opened")};return s===this.width?n():this.afterTransitionend(n),this},o.prototype.close=function(t){var e=this;if(this.emit("beforeclose",t),this.disabled)return this;if(this.state.closed)return this.state.closing=!1,this;this.state.closed=!1,this.state.closing=!0,this.state.opening=!1,this.state.opened=!1;var s=this.offset();if(s>0){var r=this.timing*s/this.width+"ms";this.menu.style.transitionDuration=r,this.panel.style.transitionDuration=r}Object.assign(this.menu.style,this.styles.closed.menu),Object.assign(this.panel.style,this.styles.closed.panel);var n=function(){e.state.closing=!1,e.state.closed=!0,Object.assign(e.menu.style,e.styles.closed.menu),Object.assign(e.panel.style,e.styles.closed.panel),e.openPanelClass&&document.documentElement.classList.remove(e.openPanelClass),e.emit("closed")};return s===0?n():this.afterTransitionend(n),this},o.prototype.toggle=function(t){return t===!0?this.open():t===!1?this.close():this.toggle(this.state.closed||this.state.closing),this},o.prototype.disable=function(){return this.disabled=!0,this},o.prototype.enable=function(){return this.disabled=!1,this},o.prototype.afterTransitionend=function(t){},o.prototype.offset=function(){return 0},o.modes={},o}(),y=function(o){I(t,o);function t(e){var s=o.call(this,e)||this;return s.touched=!1,s.ignores=[],s.ignoreSelector="",s.touch=e.touch!==!1,s.ignoreScrollables=e.ignoreScrollables!==!1,s.touch&&s.addTouchEvents(),s}return t.prototype.applyOffset=function(e){},t.prototype.initTouchEvents=function(){var e=this,s=this,r=s.width,n=s.margin,l=s.side,c=s.slope,i=s.sensitivity,a=s.menu,p=s.panel,w=l==="left"?1:-1,g=0,C=0,d=0,f=0,b=0,x=0,M=0,S=!1,X=function(E){if(!E||E===document.documentElement||E===document.body)return!1;var A=getComputedStyle(E),O=A.overflowX,T=A.overflowY;return O==="auto"||O==="scroll"||O==="visible"&&T!=="visible"||X(E.parentElement)},F=function(E){var A=E.target;if(!(e.ignoreSelector&&A.matches(e.ignoreSelector))&&!(e.ignoreScrollables&&X(A))&&(e.emit("touchstart",E),!e.disabled&&(e.touched=!1,E.touches.length===1))){var O=E.touches[0],T=O.clientX,j=O.clientY,P=e.offset(),L=n+P;(l==="left"&&T<=L||l==="right"&&window.innerWidth-T<=L)&&(e.touched=!0,g=T,C=j,d=T,f=P,x=Date.now(),S=!0)}},B=function(E){if(e.emit("touchmove",E),!(e.disabled||!e.touched)){var A=E.touches[0],O=A.clientX,T=A.clientY,j=(O-g)*w;if(!(Math.abs(j)<10)){if(S){var P=T-C,L=Math.abs(P/j);if(L>c){e.touched=!1;return}(e.state.closed&&j>0||e.state.opened)&&e.emit("beforeopen"),a.style.transition="",p.style.transition=""}if(e.state.opened&&j>0||e.state.closed&&j<0){d=O,x=Date.now();return}e.state.opened=!1,e.state.closed=!1;var R=(O-d)*w,q=R>0;e.state.opening=q,e.state.closing=!q;var U=Math.min(Math.max(0,f+j),r);e.applyOffset(U),M=d,d=O,b=x,x=Date.now(),S=!1}}},Y=function(E){if(e.touched&&(e.touched=!1,!S)){e.emit("touchend",E),Object.assign(e.panel.style,e.styles.base.panel),Object.assign(e.menu.style,e.styles.base.menu);var A=e.offset(),O=E.changedTouches[0].clientX,T,j;O===d?(T=M,j=b):(T=d,j=x);var P=O,L=Date.now(),R=(P-T)/(L-j)*w;A>r/2&&R>-i||R>i?e.open(E):e.close(E)}};return{onTouchstart:F,onTouchmove:B,onTouchend:Y}},t.prototype.addTouchEvents=function(){this.touchEvents||(this.touchEvents=this.initTouchEvents()),document.documentElement.addEventListener("touchstart",this.touchEvents.onTouchstart,!1),document.documentElement.addEventListener("touchmove",this.touchEvents.onTouchmove,!1),document.documentElement.addEventListener("touchend",this.touchEvents.onTouchend,!1)},t.prototype.removeTouchEvents=function(){document.documentElement.removeEventListener("touchstart",this.touchEvents.onTouchstart),document.documentElement.removeEventListener("touchmove",this.touchEvents.onTouchmove),document.documentElement.removeEventListener("touchend",this.touchEvents.onTouchend)},t.prototype.ignore=function(e){return this.ignores.push(e),this.ignoreSelector=this.ignores.join(", "),this},t.prototype.unignore=function(e){return this.ignores=this.ignores.filter(function(s){return s!==e}),this.ignoreSelector=this.ignores.join(", "),this},t.prototype.enableTouch=function(){return this.touch||(this.addTouchEvents(),this.touch=!0),this},t.prototype.disableTouch=function(){return this.touch&&(this.removeTouchEvents(),this.touch=!1),this},t}(v),h=function(o){I(t,o);function t(e){var s,r=o.call(this,e)||this;return r.styles.base.menu=(s={transition:"transform "+r.timing+"ms "+r.timingFunction,overflowX:"hidden",overflowY:"auto",position:"fixed"},s[r.side]="-"+r.width+"px",s.top="0",s.bottom="0",s.width=r.width+"px",s.zIndex="1",s),r.styles.open.menu={transform:"translateX("+(r.side==="right"?"-":"")+r.width+"px)"},r.styles.closed.menu={transform:"translateX(0)"},Object.assign(r.menu.style,r.styles.base.menu,r.styles.closed.menu),Object.assign(r.panel.style,r.styles.base.panel,r.styles.closed.panel),r.initTransitionend(),r}return t.prototype.offset=function(){var e=this.menu.getBoundingClientRect();return this.side==="left"?e.left+this.width:window.innerWidth-e.left},t.prototype.applyOffset=function(e){var s=this.side==="left"?1:-1;this.menu.style.transform="translateX("+e*s+"px)"},t.prototype.afterTransitionend=function(e){this.onTransitionend=e},t.prototype.initTransitionend=function(){var e=this;this.menu.addEventListener("transitionend",function(){e.onTransitionend&&e.onTransitionend(),e.onTransitionend=null},!1)},t}(y);return y.modes.drawer=h,k(),y})}}]);
